document.write('<link rel="stylesheet" href="../arduino/style/githubEmbed.css"/>');document.write('<link rel="stylesheet" href="../arduino/style/githubEmbed.css"/>');/*
---
script: Fx.Scroll.js
name: Fx.Scroll
description: Effect to smoothly scroll any element, including the window.
license: MIT-style license
authors:
  - Valerio Proietti
requires:
  - Core/Fx
  - Core/Element.Event
  - Core/Element.Dimensions
  - MooTools.More
provides: [Fx.Scroll]
...
*/

function GHE_isBody(element){
	return (/^(?:body|html)$/i).test(element.tagName);
}

Fx.Scroll = new Class({
	Extends: Fx,
	options: {
		offset: {x: 0, y: 0},
		wheelStops: true
	},
	initialize: function(element, options){
		this.element = this.subject = document.id(element);
		this.parent(options);
		if (typeOf(this.element) != 'element') this.element = document.id(this.element.getDocument().body);
		if (this.options.wheelStops){
			var stopper = this.element,
				cancel = this.cancel.pass(false, this);
			this.addEvent('start', function(){
				stopper.addEvent('mousewheel', cancel);
			}, true);
			this.addEvent('complete', function(){
				stopper.removeEvent('mousewheel', cancel);
			}, true);
		}
	},
	set: function(){
		var now = Array.flatten(arguments);
		if (Browser.firefox) now = [Math.round(now[0]), Math.round(now[1])]; // not needed anymore in newer firefox versions
		this.element.scrollTo(now[0], now[1]);
		return this;
	},
	compute: function(from, to, delta){
		return [0, 1].map(function(i){
			return Fx.compute(from[i], to[i], delta);
		});
	},
	start: function(x, y){
		if (!this.check(x, y)) return this;
		var scroll = this.element.getScroll();
		return this.parent([scroll.x, scroll.y], [x, y]);
	},
	calculateScroll: function(x, y){
		var element = this.element,
			scrollSize = element.getScrollSize(),
			scroll = element.getScroll(),
			size = element.getSize(),
			offset = this.options.offset,
			values = {x: x, y: y};
		for (var z in values){
			if (!values[z] && values[z] !== 0) values[z] = scroll[z];
			if (typeOf(values[z]) != 'number') values[z] = scrollSize[z] - size[z];
			values[z] += offset[z];
		}
		return [values.x, values.y];
	},
	toElement: function(el, axes){
		axes = axes ? Array.from(axes) : ['x', 'y'];
		var scroll = GHE_isBody(this.element) ? {x: 0, y: 0} : this.element.getScroll();
		var position = Object.map(document.id(el).getPosition(this.element), function(value, axis){
			return axes.contains(axis) ? value + scroll[axis] : false;
		});
		return this.start.apply(this, this.calculateScroll(position.x, position.y));
	}
});

var Embed = new Class({
	Implements: [Events],
	initialize: function(wrapper, codeWrapper, data){

		this.wrapper = document.id(wrapper);
		this.codeWrapper = document.id(codeWrapper);
		this.data = data;
		this.codeScroll = new Fx.Scroll(this.codeWrapper, {link: 'cancel'});
		this.files = [];
		this.rawTree = [];
		for (var i = 0; i < data.tree.length; i++) {
			var file = {};
			file.path = this.getPath(this.data.tree[i].path);
			file.mode = this.data.tree[i].mode;
			file.sha = this.data.tree[i].sha;
			file.url = this.data.tree[i].url;
			file.name = file.path.pop();
			file.extension = file.name.split('.').pop();
			file.type = (this.data.tree[i].type == "tree")? 'folder' : 'file';
			this.rawTree.push(file);
		}
		this.filelist = new GHE_Filelist(this.wrapper);
		//loop through files, and make structure.
		for (var i = 0; i < this.rawTree.length; i++) {
			var file = this.rawTree[i];
			var path = this.filelist;
			//find/create file path
			while(file.path.length > 0){
				var segment = file.path.shift();
				if(!path[segment]){
					path[segment] =  new GHE_Folder(path.fileHousing, file, segment);
				}
				path = path[segment];
			}
			if(file.type == 'file'){
				if(file.extension != 'gitignore' && file.extension != 'pdf'){
					path[file.name] = new GHE_File(path.fileHousing,file);
					path[file.name].addEvent('clicked', this.fileClicked.bind(this));
					this.files.push(path[file.name]);
				}
			}else{
				path[file.name] = new GHE_Folder(path.fileHousing,file);
			}
		}
		this.files[0].select();
		console.log(this.fileList);
	},
	fileClicked: function(file){
		for (var i = 0; i < this.files.length; i++) {
			this.files[i].unselect();
		}
		file.select();
		console.log(file);
		this.codeScroll.toElement(document.id(file.sha));
	},
	getPath: function(path){
		return path.split("/");
	}
});var GHE_Filelist = new Class({
	Implements: [Events],
	initialize: function(wrapper){
		this.wrapper = document.id(wrapper);
		
		this.buildUI();
	},
	buildUI: function(){
		this.body = new Element('div', {'class': 'fileList'}).inject(this.wrapper);
			this.fileHousing = new Element('div', {'class': 'fileHousing'}).inject(this.body);
		//console.log(this);
	},
});
var GHE_File = new Class({
	Implements: [Events],
	initialize: function(wrapper, data){
		this.data = data;
		this.name = data.name;
		this.sha = data.sha;
		this.url = data.url;
		this.mode = data.mode;
		this.wrapper = document.id(wrapper);
		this.buildUI();
	},
	buildUI: function(){
		this.body = new Element('div', {'class': 'file'}).inject(this.wrapper);
			this.nameEl = new Element('div', {'class': 'name', html: this.data.name}).inject(this.body);
		this.body.addEvent('click', this.clicked.bind(this));
	},
	clicked: function(){
		this.fireEvent('clicked', this);
	},
	select: function(){
		this.body.addClass('selected');
	},
	unselect: function(){
		this.body.removeClass('selected');
	}
});var GHE_Folder = new Class({
	Implements: [Events],
	initialize: function(wrapper, data, name){
		this.data = data;
		this.name = name;
		this.sha = data.sha;
		this.url = data.url;
		this.mode = data.mode;
		this.wrapper = document.id(wrapper);
		
		this.buildUI();
	},
	buildUI: function(){
		this.folderWrapper = new Element('div', {'class': 'folderWrapper'}).inject(this.wrapper);
			this.body = new Element('div', {'class': 'folder'}).inject(this.folderWrapper);
				this.nameEl = new Element('div', {'class': 'name', html: this.name}).inject(this.body);
			this.fileHousing = new Element('div', {'class': 'fileHousing'}).inject(this.folderWrapper);
		this.body.addEvent('click', this.clicked.bind(this));
	},
	clicked: function(){
		this.fireEvent('clicked', this);
	},
	addFile: function(file){
		this.fileHousing.inject(file.body);
	}
});
document.write('<div class=\"githubEmbed_projectWrapper\"><div class=\"projectHeader\" ><span class=\"projectTitle\"><a title=\"github.com: ameyer/ADXL345\" href=\"http://github.com/ameyer/ADXL345\">ADXL345</a> </span><a class=\"downloadButton\" title=\"download prject from github\" href=\"https://github.com/ameyer/ADXL345/archive/master.zip\">download</a></div><div class=\"body\"><div class=\"sideBar\" id=\"ADXL345_sidebar\"></div><div class=\"projectCode\" id=\"ADXL345_code\">   <div class=\"fileWrapper ino\" id=\"4459d83e68a87ca731dc8d1df908a7b7fe003ae9\">  <p class=\"fileHead\">ADXL345_Example.ino</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code><span class=\"co1\">//Arduino 1.0+ Only!</span><br /><span class=\"co1\">//Arduino 1.0+ Only!</span><br /><br /><span class=\"co2\">#include &lt;Wire.h&gt;</span><br /><span class=\"co2\">#include &lt;ADXL345.h&gt;</span><br /><br /><br />ADXL345 adxl<span class=\"sy0\">;</span> <span class=\"co1\">//variable adxl is an instance of the ADXL345 library</span><br /><br /><span class=\"kw4\">void</span> setup<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">begin</span><span class=\"br0\">&#40;</span>9600<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">powerOn</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br /> <span class=\"co1\">//set activity/ inactivity thresholds (0-255)</span><br /> adxl.<span class=\"me1\">setActivityThreshold</span><span class=\"br0\">&#40;</span>75<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//62.5mg per increment</span><br /> adxl.<span class=\"me1\">setInactivityThreshold</span><span class=\"br0\">&#40;</span>75<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//62.5mg per increment</span><br /> adxl.<span class=\"me1\">setTimeInactivity</span><span class=\"br0\">&#40;</span>10<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// how many seconds of no activity is inactive?</span><br /><br /> <span class=\"co1\">//look of activity movement on this axes - 1 == on; 0 == off </span><br /> adxl.<span class=\"me1\">setActivityX</span><span class=\"br0\">&#40;</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setActivityY</span><span class=\"br0\">&#40;</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setActivityZ</span><span class=\"br0\">&#40;</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br /> <span class=\"co1\">//look of inactivity movement on this axes - 1 == on; 0 == off</span><br /> adxl.<span class=\"me1\">setInactivityX</span><span class=\"br0\">&#40;</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInactivityY</span><span class=\"br0\">&#40;</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInactivityZ</span><span class=\"br0\">&#40;</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br /> <span class=\"co1\">//look of tap movement on this axes - 1 == on; 0 == off</span><br /> adxl.<span class=\"me1\">setTapDetectionOnX</span><span class=\"br0\">&#40;</span>0<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setTapDetectionOnY</span><span class=\"br0\">&#40;</span>0<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setTapDetectionOnZ</span><span class=\"br0\">&#40;</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br /> <span class=\"co1\">//set values for what is a tap, and what is a double tap (0-255)</span><br /> adxl.<span class=\"me1\">setTapThreshold</span><span class=\"br0\">&#40;</span>50<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//62.5mg per increment</span><br /> adxl.<span class=\"me1\">setTapDuration</span><span class=\"br0\">&#40;</span>15<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//625Î¼s per increment</span><br /> adxl.<span class=\"me1\">setDoubleTapLatency</span><span class=\"br0\">&#40;</span>80<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//1.25ms per increment</span><br /> adxl.<span class=\"me1\">setDoubleTapWindow</span><span class=\"br0\">&#40;</span>200<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//1.25ms per increment</span><br /><br /> <span class=\"co1\">//set values for what is considered freefall (0-255)</span><br /> adxl.<span class=\"me1\">setFreeFallThreshold</span><span class=\"br0\">&#40;</span>7<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//(5 - 9) recommended - 62.5mg per increment</span><br /> adxl.<span class=\"me1\">setFreeFallDuration</span><span class=\"br0\">&#40;</span>45<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//(20 - 70) recommended - 5ms per increment</span><br /><br /> <span class=\"co1\">//setting all interupts to take place on int pin 1</span><br /> <span class=\"co1\">//I had issues with int pin 2, was unable to reset it</span><br /> adxl.<span class=\"me1\">setInterruptMapping</span><span class=\"br0\">&#40;</span> ADXL345_INT_SINGLE_TAP_BIT<span class=\"sy0\">,</span>  ADXL345_INT1_PIN <span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInterruptMapping</span><span class=\"br0\">&#40;</span> ADXL345_INT_DOUBLE_TAP_BIT<span class=\"sy0\">,</span>  ADXL345_INT1_PIN <span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInterruptMapping</span><span class=\"br0\">&#40;</span> ADXL345_INT_FREE_FALL_BIT<span class=\"sy0\">,</span>  ADXL345_INT1_PIN <span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInterruptMapping</span><span class=\"br0\">&#40;</span> ADXL345_INT_ACTIVITY_BIT<span class=\"sy0\">,</span>   ADXL345_INT1_PIN <span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInterruptMapping</span><span class=\"br0\">&#40;</span> ADXL345_INT_INACTIVITY_BIT<span class=\"sy0\">,</span>  ADXL345_INT1_PIN <span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br /> <span class=\"co1\">//register interupt actions - 1 == on; 0 == off </span><br /> adxl.<span class=\"me1\">setInterrupt</span><span class=\"br0\">&#40;</span> ADXL345_INT_SINGLE_TAP_BIT<span class=\"sy0\">,</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInterrupt</span><span class=\"br0\">&#40;</span> ADXL345_INT_DOUBLE_TAP_BIT<span class=\"sy0\">,</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInterrupt</span><span class=\"br0\">&#40;</span> ADXL345_INT_FREE_FALL_BIT<span class=\"sy0\">,</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInterrupt</span><span class=\"br0\">&#40;</span> ADXL345_INT_ACTIVITY_BIT<span class=\"sy0\">,</span>  1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> adxl.<span class=\"me1\">setInterrupt</span><span class=\"br0\">&#40;</span> ADXL345_INT_INACTIVITY_BIT<span class=\"sy0\">,</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> loop<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> <br /> <span class=\"co1\">//Boring accelerometer stuff  </span><br /> <span class=\"kw4\">int</span> x<span class=\"sy0\">,</span>y<span class=\"sy0\">,</span>z<span class=\"sy0\">;</span> <br /> adxl.<span class=\"me1\">readAccel</span><span class=\"br0\">&#40;</span><span class=\"sy0\">&amp;</span>x<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>y<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>z<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//read the accelerometer values and store them in variables x,y,z</span><br /><br /> <span class=\"co1\">// Output x,y,z values - Commented out</span><br /> <span class=\"co1\">//Serial.print(x);</span><br /> <span class=\"co1\">//Serial.print(y);</span><br /> <span class=\"co1\">//Serial.println(z);</span><br /><br /><br /> <span class=\"co1\">//Fun Stuff!  </span><br /> <span class=\"co1\">//read interrupts source and look for triggerd actions</span><br /> <br /> <span class=\"co1\">//getInterruptSource clears all triggered actions after returning value</span><br /> <span class=\"co1\">//so do not call again until you need to recheck for triggered actions</span><br /> <span class=\"kw4\">byte</span> <a href=\"geshi/redirect.php?language=arduino&search=interrupts\"><span class=\"kw3\">interrupts</span></a> <span class=\"sy0\">=</span> adxl.<span class=\"me1\">getInterruptSource</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <br /> <span class=\"co1\">// freefall</span><br /> <span class=\"kw1\">if</span><span class=\"br0\">&#40;</span>adxl.<span class=\"me1\">triggered</span><span class=\"br0\">&#40;</span><a href=\"geshi/redirect.php?language=arduino&search=interrupts\"><span class=\"kw3\">interrupts</span></a><span class=\"sy0\">,</span> ADXL345_FREE_FALL<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />  <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">println</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;freefall&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"co1\">//add code here to do when freefall is sensed</span><br /> <span class=\"br0\">&#125;</span> <br /> <br /> <span class=\"co1\">//inactivity</span><br /> <span class=\"kw1\">if</span><span class=\"br0\">&#40;</span>adxl.<span class=\"me1\">triggered</span><span class=\"br0\">&#40;</span><a href=\"geshi/redirect.php?language=arduino&search=interrupts\"><span class=\"kw3\">interrupts</span></a><span class=\"sy0\">,</span> ADXL345_INACTIVITY<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />  <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">println</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;inactivity&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"co1\">//add code here to do when inactivity is sensed</span><br /> <span class=\"br0\">&#125;</span><br /> <br /> <span class=\"co1\">//activity</span><br /> <span class=\"kw1\">if</span><span class=\"br0\">&#40;</span>adxl.<span class=\"me1\">triggered</span><span class=\"br0\">&#40;</span><a href=\"geshi/redirect.php?language=arduino&search=interrupts\"><span class=\"kw3\">interrupts</span></a><span class=\"sy0\">,</span> ADXL345_ACTIVITY<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />  <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">println</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;activity&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />  <span class=\"co1\">//add code here to do when activity is sensed</span><br /> <span class=\"br0\">&#125;</span><br /> <br /> <span class=\"co1\">//double tap</span><br /> <span class=\"kw1\">if</span><span class=\"br0\">&#40;</span>adxl.<span class=\"me1\">triggered</span><span class=\"br0\">&#40;</span><a href=\"geshi/redirect.php?language=arduino&search=interrupts\"><span class=\"kw3\">interrupts</span></a><span class=\"sy0\">,</span> ADXL345_DOUBLE_TAP<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />  <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">println</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;double tap&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"co1\">//add code here to do when a 2X tap is sensed</span><br /> <span class=\"br0\">&#125;</span><br /> <br /> <span class=\"co1\">//tap</span><br /> <span class=\"kw1\">if</span><span class=\"br0\">&#40;</span>adxl.<span class=\"me1\">triggered</span><span class=\"br0\">&#40;</span><a href=\"geshi/redirect.php?language=arduino&search=interrupts\"><span class=\"kw3\">interrupts</span></a><span class=\"sy0\">,</span> ADXL345_SINGLE_TAP<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />  <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">println</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;tap&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"co1\">//add code here to do when a tap is sensed</span><br /> <span class=\"br0\">&#125;</span> <br /><br /><br /><span class=\"br0\">&#125;</span></code></pre>  </div>  </div>  </div>      <div class=\"fileWrapper cpp\" id=\"9762e671ca8a40097de828ed7e686e27433648fb\">  <p class=\"fileHead\">ADXL345.cpp</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br />161<br />162<br />163<br />164<br />165<br />166<br />167<br />168<br />169<br />170<br />171<br />172<br />173<br />174<br />175<br />176<br />177<br />178<br />179<br />180<br />181<br />182<br />183<br />184<br />185<br />186<br />187<br />188<br />189<br />190<br />191<br />192<br />193<br />194<br />195<br />196<br />197<br />198<br />199<br />200<br />201<br />202<br />203<br />204<br />205<br />206<br />207<br />208<br />209<br />210<br />211<br />212<br />213<br />214<br />215<br />216<br />217<br />218<br />219<br />220<br />221<br />222<br />223<br />224<br />225<br />226<br />227<br />228<br />229<br />230<br />231<br />232<br />233<br />234<br />235<br />236<br />237<br />238<br />239<br />240<br />241<br />242<br />243<br />244<br />245<br />246<br />247<br />248<br />249<br />250<br />251<br />252<br />253<br />254<br />255<br />256<br />257<br />258<br />259<br />260<br />261<br />262<br />263<br />264<br />265<br />266<br />267<br />268<br />269<br />270<br />271<br />272<br />273<br />274<br />275<br />276<br />277<br />278<br />279<br />280<br />281<br />282<br />283<br />284<br />285<br />286<br />287<br />288<br />289<br />290<br />291<br />292<br />293<br />294<br />295<br />296<br />297<br />298<br />299<br />300<br />301<br />302<br />303<br />304<br />305<br />306<br />307<br />308<br />309<br />310<br />311<br />312<br />313<br />314<br />315<br />316<br />317<br />318<br />319<br />320<br />321<br />322<br />323<br />324<br />325<br />326<br />327<br />328<br />329<br />330<br />331<br />332<br />333<br />334<br />335<br />336<br />337<br />338<br />339<br />340<br />341<br />342<br />343<br />344<br />345<br />346<br />347<br />348<br />349<br />350<br />351<br />352<br />353<br />354<br />355<br />356<br />357<br />358<br />359<br />360<br />361<br />362<br />363<br />364<br />365<br />366<br />367<br />368<br />369<br />370<br />371<br />372<br />373<br />374<br />375<br />376<br />377<br />378<br />379<br />380<br />381<br />382<br />383<br />384<br />385<br />386<br />387<br />388<br />389<br />390<br />391<br />392<br />393<br />394<br />395<br />396<br />397<br />398<br />399<br />400<br />401<br />402<br />403<br />404<br />405<br />406<br />407<br />408<br />409<br />410<br />411<br />412<br />413<br />414<br />415<br />416<br />417<br />418<br />419<br />420<br />421<br />422<br />423<br />424<br />425<br />426<br />427<br />428<br />429<br />430<br />431<br />432<br />433<br />434<br />435<br />436<br />437<br />438<br />439<br />440<br />441<br />442<br />443<br />444<br />445<br />446<br />447<br />448<br />449<br />450<br />451<br />452<br />453<br />454<br />455<br />456<br />457<br />458<br />459<br />460<br />461<br />462<br />463<br />464<br />465<br />466<br />467<br />468<br />469<br />470<br />471<br />472<br />473<br />474<br />475<br />476<br />477<br />478<br />479<br />480<br />481<br />482<br />483<br />484<br />485<br />486<br />487<br />488<br />489<br />490<br />491<br />492<br />493<br />494<br />495<br />496<br />497<br />498<br />499<br />500<br />501<br />502<br />503<br />504<br />505<br />506<br />507<br />508<br />509<br />510<br />511<br />512<br />513<br />514<br />515<br />516<br />517<br />518<br />519<br />520<br />521<br />522<br />523<br />524<br />525<br />526<br />527<br />528<br />529<br />530<br />531<br />532<br />533<br />534<br />535<br />536<br />537<br />538<br />539<br />540<br />541<br />542<br />543<br />544<br />545<br />546<br />547<br />548<br />549<br />550<br />551<br />552<br />553<br />554<br />555<br />556<br />557<br />558<br />559<br />560<br />561<br />562<br />563<br />564<br />565<br />566<br />567<br />568<br />569<br />570<br />571<br />572<br />573<br />574<br />575<br />576<br />577<br />578<br />579<br />580<br />581<br />582<br />583<br />584<br />585<br />586<br />587<br />588<br />589<br />590<br />591<br />592<br />593<br />594<br />595<br />596<br />597<br />598<br />599<br />600<br />601<br />602<br />603<br />604<br />605<br />606<br />607<br />608<br />609<br />610<br />611<br />612<br />613<br />614<br />615<br />616<br />617<br />618<br />619<br />620<br />621<br />622<br />623<br />624<br />625<br />626<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code><span class=\"coMULTI\">/**************************************************************************<br />*                                     *<br />* ADXL345 Driver for Arduino                       *<br />*                                     *<br />***************************************************************************<br />*                                     * <br />* This program is free software; you can redistribute it and/or modify  *<br />* it under the terms of the GNU License.                 *<br />* This program is distributed in the hope that it will be useful,     *<br />* but WITHOUT ANY WARRANTY; without even the implied warranty of     *<br />* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the      *<br />* GNU License V2 for more details.                    *<br />*                                     *<br />***************************************************************************/</span><br /><span class=\"co2\">#include &quot;Arduino.h&quot;</span><br /><span class=\"co2\">#include &quot;ADXL345.h&quot;</span><br /><span class=\"co2\">#include &lt;Wire.h&gt;</span><br /><br /><span class=\"co2\">#define ADXL345_DEVICE (0x53)  // ADXL345 device address</span><br /><span class=\"co2\">#define ADXL345_TO_READ (6)   // num of bytes we are going to read each time (two bytes for each axis)</span><br /><br />ADXL345<span class=\"sy0\">::</span><span class=\"me2\">ADXL345</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    status <span class=\"sy0\">=</span> ADXL345_OK<span class=\"sy0\">;</span><br />    error_code <span class=\"sy0\">=</span> ADXL345_NO_ERROR<span class=\"sy0\">;</span><br />    <br />    gains<span class=\"br0\">&#91;</span>0<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu16\">0.00376390</span><span class=\"sy0\">;</span><br />    gains<span class=\"br0\">&#91;</span>1<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu16\">0.00376009</span><span class=\"sy0\">;</span><br />    gains<span class=\"br0\">&#91;</span>2<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu16\">0.00349265</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">powerOn</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    Wire.<span class=\"me1\">begin</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>    <span class=\"co1\">// join i2c bus (address optional for master)</span><br />    <span class=\"co1\">//Turning on the ADXL345</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_POWER_CTL<span class=\"sy0\">,</span> 0<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>   <br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_POWER_CTL<span class=\"sy0\">,</span> 16<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_POWER_CTL<span class=\"sy0\">,</span> 8<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Reads the acceleration into three variable x, y and z</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">readAccel</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> <span class=\"sy0\">*</span>xyz<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    readAccel<span class=\"br0\">&#40;</span>xyz<span class=\"sy0\">,</span> xyz <span class=\"sy0\">+</span> 1<span class=\"sy0\">,</span> xyz <span class=\"sy0\">+</span> 2<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">readAccel</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> <span class=\"sy0\">*</span>x<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> <span class=\"sy0\">*</span>y<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> <span class=\"sy0\">*</span>z<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_DATAX0<span class=\"sy0\">,</span> ADXL345_TO_READ<span class=\"sy0\">,</span> _buff<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//read the acceleration data from the ADXL345</span><br />    <br />    <span class=\"co1\">// each axis reading comes in 10 bit resolution, ie 2 bytes. Least Significat Byte first!!</span><br />    <span class=\"co1\">// thus we are converting both bytes in to one int</span><br />    <span class=\"sy0\">*</span>x <span class=\"sy0\">=</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span><span class=\"br0\">&#41;</span>_buff<span class=\"br0\">&#91;</span>1<span class=\"br0\">&#93;</span><span class=\"br0\">&#41;</span> <span class=\"sy0\">&lt;&lt;</span> 8<span class=\"br0\">&#41;</span> <span class=\"sy0\">|</span> _buff<span class=\"br0\">&#91;</span>0<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span>  <br />    <span class=\"sy0\">*</span>y <span class=\"sy0\">=</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span><span class=\"br0\">&#41;</span>_buff<span class=\"br0\">&#91;</span>3<span class=\"br0\">&#93;</span><span class=\"br0\">&#41;</span> <span class=\"sy0\">&lt;&lt;</span> 8<span class=\"br0\">&#41;</span> <span class=\"sy0\">|</span> _buff<span class=\"br0\">&#91;</span>2<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span><br />    <span class=\"sy0\">*</span>z <span class=\"sy0\">=</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span><span class=\"br0\">&#41;</span>_buff<span class=\"br0\">&#91;</span>5<span class=\"br0\">&#93;</span><span class=\"br0\">&#41;</span> <span class=\"sy0\">&lt;&lt;</span> 8<span class=\"br0\">&#41;</span> <span class=\"sy0\">|</span> _buff<span class=\"br0\">&#91;</span>4<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">get_Gxyz</span><span class=\"br0\">&#40;</span><span class=\"kw4\">double</span> <span class=\"sy0\">*</span>xyz<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    <span class=\"kw4\">int</span> i<span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> xyz_int<span class=\"br0\">&#91;</span>3<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span><br />    readAccel<span class=\"br0\">&#40;</span>xyz_int<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw1\">for</span><span class=\"br0\">&#40;</span>i<span class=\"sy0\">=</span><span class=\"nu0\">0</span><span class=\"sy0\">;</span> i<span class=\"sy0\">&lt;</span><span class=\"nu0\">3</span><span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />        xyz<span class=\"br0\">&#91;</span>i<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> xyz_int<span class=\"br0\">&#91;</span>i<span class=\"br0\">&#93;</span> <span class=\"sy0\">*</span> gains<span class=\"br0\">&#91;</span>i<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span><br />    <span class=\"br0\">&#125;</span><br /><span class=\"br0\">&#125;</span><br /><span class=\"co1\">// Writes val to address register on device</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">writeTo</span><span class=\"br0\">&#40;</span>byte address<span class=\"sy0\">,</span> byte val<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    Wire.<span class=\"me1\">beginTransmission</span><span class=\"br0\">&#40;</span>ADXL345_DEVICE<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// start transmission to device </span><br />    Wire.<span class=\"me1\">write</span><span class=\"br0\">&#40;</span>address<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>       <span class=\"co1\">// send register address</span><br />    Wire.<span class=\"me1\">write</span><span class=\"br0\">&#40;</span>val<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>         <span class=\"co1\">// send value to write</span><br />    Wire.<span class=\"me1\">endTransmission</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>     <span class=\"co1\">// end transmission</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Reads num bytes starting from address register on device in to _buff array</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">readFrom</span><span class=\"br0\">&#40;</span>byte address<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> num<span class=\"sy0\">,</span> byte _buff<span class=\"br0\">&#91;</span><span class=\"br0\">&#93;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    Wire.<span class=\"me1\">beginTransmission</span><span class=\"br0\">&#40;</span>ADXL345_DEVICE<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// start transmission to device </span><br />    Wire.<span class=\"me1\">write</span><span class=\"br0\">&#40;</span>address<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>       <span class=\"co1\">// sends address to read from</span><br />    Wire.<span class=\"me1\">endTransmission</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>     <span class=\"co1\">// end transmission</span><br />    <br />    Wire.<span class=\"me1\">beginTransmission</span><span class=\"br0\">&#40;</span>ADXL345_DEVICE<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// start transmission to device</span><br />    Wire.<span class=\"me1\">requestFrom</span><span class=\"br0\">&#40;</span>ADXL345_DEVICE<span class=\"sy0\">,</span> num<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>  <span class=\"co1\">// request 6 bytes from device</span><br />    <br />    <span class=\"kw4\">int</span> i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br />    <span class=\"kw1\">while</span><span class=\"br0\">&#40;</span>Wire.<span class=\"me1\">available</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span>     <span class=\"co1\">// device may send less than requested (abnormal)</span><br />    <span class=\"br0\">&#123;</span> <br />        _buff<span class=\"br0\">&#91;</span>i<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> Wire.<span class=\"me1\">read</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>  <span class=\"co1\">// receive a byte</span><br />        i<span class=\"sy0\">++;</span><br />    <span class=\"br0\">&#125;</span><br />    <span class=\"kw1\">if</span><span class=\"br0\">&#40;</span>i <span class=\"sy0\">!=</span> num<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />        status <span class=\"sy0\">=</span> ADXL345_ERROR<span class=\"sy0\">;</span><br />        error_code <span class=\"sy0\">=</span> ADXL345_READ_ERROR<span class=\"sy0\">;</span><br />    <span class=\"br0\">&#125;</span><br />    Wire.<span class=\"me1\">endTransmission</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>     <span class=\"co1\">// end transmission</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the range setting and return it into rangeSetting</span><br /><span class=\"co1\">// it can be 2, 4, 8 or 16</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getRangeSetting</span><span class=\"br0\">&#40;</span>byte<span class=\"sy0\">*</span> rangeSetting<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"sy0\">*</span>rangeSetting <span class=\"sy0\">=</span> _b <span class=\"sy0\">&amp;</span> B00000011<span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the range setting, possible values are: 2, 4, 8, 16</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setRangeSetting</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> val<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _s<span class=\"sy0\">;</span><br />    byte _b<span class=\"sy0\">;</span><br />    <br />    <span class=\"kw1\">switch</span> <span class=\"br0\">&#40;</span>val<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />        <span class=\"kw1\">case</span> 2<span class=\"sy0\">:</span> <br />            _s <span class=\"sy0\">=</span> B00000000<span class=\"sy0\">;</span> <br />            <span class=\"kw2\">break</span><span class=\"sy0\">;</span><br />        <span class=\"kw1\">case</span> 4<span class=\"sy0\">:</span> <br />            _s <span class=\"sy0\">=</span> B00000001<span class=\"sy0\">;</span> <br />            <span class=\"kw2\">break</span><span class=\"sy0\">;</span><br />        <span class=\"kw1\">case</span> 8<span class=\"sy0\">:</span> <br />            _s <span class=\"sy0\">=</span> B00000010<span class=\"sy0\">;</span> <br />            <span class=\"kw2\">break</span><span class=\"sy0\">;</span><br />        <span class=\"kw1\">case</span> 16<span class=\"sy0\">:</span> <br />            _s <span class=\"sy0\">=</span> B00000011<span class=\"sy0\">;</span> <br />            <span class=\"kw2\">break</span><span class=\"sy0\">;</span><br />        <span class=\"kw1\">default</span><span class=\"sy0\">:</span> <br />            _s <span class=\"sy0\">=</span> B00000000<span class=\"sy0\">;</span><br />    <span class=\"br0\">&#125;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    _s <span class=\"sy0\">|=</span> <span class=\"br0\">&#40;</span>_b <span class=\"sy0\">&amp;</span> B11101100<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> _s<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><span class=\"co1\">// gets the state of the SELF_TEST bit</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getSelfTestBit</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 7<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the SELF-TEST bit</span><br /><span class=\"co1\">// if set to 1 it applies a self-test force to the sensor causing a shift in the output data</span><br /><span class=\"co1\">// if set to 0 it disables the self-test force</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setSelfTestBit</span><span class=\"br0\">&#40;</span>bool selfTestBit<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 7<span class=\"sy0\">,</span> selfTestBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the state of the SPI bit</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getSpiBit</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 6<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the SPI bit</span><br /><span class=\"co1\">// if set to 1 it sets the device to 3-wire mode</span><br /><span class=\"co1\">// if set to 0 it sets the device to 4-wire SPI mode</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setSpiBit</span><span class=\"br0\">&#40;</span>bool spiBit<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 6<span class=\"sy0\">,</span> spiBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the state of the INT_INVERT bit</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getInterruptLevelBit</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 5<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the INT_INVERT bit</span><br /><span class=\"co1\">// if set to 0 sets the interrupts to active high</span><br /><span class=\"co1\">// if set to 1 sets the interrupts to active low</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setInterruptLevelBit</span><span class=\"br0\">&#40;</span>bool interruptLevelBit<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 5<span class=\"sy0\">,</span> interruptLevelBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the state of the FULL_RES bit</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getFullResBit</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 3<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the FULL_RES bit</span><br /><span class=\"co1\">// if set to 1, the device is in full resolution mode, where the output resolution increases with the</span><br /><span class=\"co1\">//  g range set by the range bits to maintain a 4mg/LSB scal factor</span><br /><span class=\"co1\">// if set to 0, the device is in 10-bit mode, and the range buts determine the maximum g range</span><br /><span class=\"co1\">//  and scale factor</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setFullResBit</span><span class=\"br0\">&#40;</span>bool fullResBit<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 3<span class=\"sy0\">,</span> fullResBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the state of the justify bit</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getJustifyBit</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 2<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the JUSTIFY bit</span><br /><span class=\"co1\">// if sets to 1 selects the left justified mode</span><br /><span class=\"co1\">// if sets to 0 selects right justified mode with sign extension</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setJustifyBit</span><span class=\"br0\">&#40;</span>bool justifyBit<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_DATA_FORMAT<span class=\"sy0\">,</span> 2<span class=\"sy0\">,</span> justifyBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the THRESH_TAP byte value</span><br /><span class=\"co1\">// it should be between 0 and 255</span><br /><span class=\"co1\">// the scale factor is 62.5 mg/LSB</span><br /><span class=\"co1\">// A value of 0 may result in undesirable behavior</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setTapThreshold</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> tapThreshold<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    tapThreshold <span class=\"sy0\">=</span> constrain<span class=\"br0\">&#40;</span>tapThreshold<span class=\"sy0\">,</span>0<span class=\"sy0\">,</span>255<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    byte _b <span class=\"sy0\">=</span> byte <span class=\"br0\">&#40;</span>tapThreshold<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_THRESH_TAP<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the THRESH_TAP byte value</span><br /><span class=\"co1\">// return value is comprised between 0 and 255</span><br /><span class=\"co1\">// the scale factor is 62.5 mg/LSB</span><br /><span class=\"kw4\">int</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getTapThreshold</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_THRESH_TAP<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"kw1\">return</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// set/get the gain for each axis in Gs / count</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setAxisGains</span><span class=\"br0\">&#40;</span><span class=\"kw4\">double</span> <span class=\"sy0\">*</span>_gains<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    <span class=\"kw4\">int</span> i<span class=\"sy0\">;</span><br />    <span class=\"kw1\">for</span><span class=\"br0\">&#40;</span>i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> i <span class=\"sy0\">&lt;</span> <span class=\"nu0\">3</span><span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />        gains<span class=\"br0\">&#91;</span>i<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> _gains<span class=\"br0\">&#91;</span>i<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span><br />    <span class=\"br0\">&#125;</span><br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getAxisGains</span><span class=\"br0\">&#40;</span><span class=\"kw4\">double</span> <span class=\"sy0\">*</span>_gains<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    <span class=\"kw4\">int</span> i<span class=\"sy0\">;</span><br />    <span class=\"kw1\">for</span><span class=\"br0\">&#40;</span>i <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span> i <span class=\"sy0\">&lt;</span> <span class=\"nu0\">3</span><span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />        _gains<span class=\"br0\">&#91;</span>i<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> gains<span class=\"br0\">&#91;</span>i<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span><br />    <span class=\"br0\">&#125;</span><br /><span class=\"br0\">&#125;</span><br /><br /><br /><span class=\"co1\">// Sets the OFSX, OFSY and OFSZ bytes</span><br /><span class=\"co1\">// OFSX, OFSY and OFSZ are user offset adjustments in twos complement format with</span><br /><span class=\"co1\">// a scale factor of 15,6mg/LSB</span><br /><span class=\"co1\">// OFSX, OFSY and OFSZ should be comprised between </span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setAxisOffset</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> x<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> y<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> z<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_OFSX<span class=\"sy0\">,</span> byte <span class=\"br0\">&#40;</span>x<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_OFSY<span class=\"sy0\">,</span> byte <span class=\"br0\">&#40;</span>y<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_OFSZ<span class=\"sy0\">,</span> byte <span class=\"br0\">&#40;</span>z<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the OFSX, OFSY and OFSZ bytes</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getAxisOffset</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span><span class=\"sy0\">*</span> x<span class=\"sy0\">,</span> <span class=\"kw4\">int</span><span class=\"sy0\">*</span> y<span class=\"sy0\">,</span> <span class=\"kw4\">int</span><span class=\"sy0\">*</span>z<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_OFSX<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"sy0\">*</span>x <span class=\"sy0\">=</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_OFSY<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"sy0\">*</span>y <span class=\"sy0\">=</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_OFSZ<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"sy0\">*</span>z <span class=\"sy0\">=</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the DUR byte</span><br /><span class=\"co1\">// The DUR byte contains an unsigned time value representing the maximum time</span><br /><span class=\"co1\">// that an event must be above THRESH_TAP threshold to qualify as a tap event</span><br /><span class=\"co1\">// The scale factor is 625Âµs/LSB</span><br /><span class=\"co1\">// A value of 0 disables the tap/double tap funcitons. Max value is 255.</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setTapDuration</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> tapDuration<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    tapDuration <span class=\"sy0\">=</span> constrain<span class=\"br0\">&#40;</span>tapDuration<span class=\"sy0\">,</span>0<span class=\"sy0\">,</span>255<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    byte _b <span class=\"sy0\">=</span> byte <span class=\"br0\">&#40;</span>tapDuration<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_DUR<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the DUR byte</span><br /><span class=\"kw4\">int</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getTapDuration</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_DUR<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"kw1\">return</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the latency (latent register) which contains an unsigned time value</span><br /><span class=\"co1\">// representing the wait time from the detection of a tap event to the start</span><br /><span class=\"co1\">// of the time window, during which a possible second tap can be detected.</span><br /><span class=\"co1\">// The scale factor is 1.25ms/LSB. A value of 0 disables the double tap function.</span><br /><span class=\"co1\">// It accepts a maximum value of 255.</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setDoubleTapLatency</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> doubleTapLatency<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b <span class=\"sy0\">=</span> byte <span class=\"br0\">&#40;</span>doubleTapLatency<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_LATENT<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the Latent value</span><br /><span class=\"kw4\">int</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getDoubleTapLatency</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_LATENT<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"kw1\">return</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the Window register, which contains an unsigned time value representing</span><br /><span class=\"co1\">// the amount of time after the expiration of the latency time (Latent register)</span><br /><span class=\"co1\">// during which a second valud tap can begin. The scale factor is 1.25ms/LSB. A</span><br /><span class=\"co1\">// value of 0 disables the double tap function. The maximum value is 255.</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setDoubleTapWindow</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> doubleTapWindow<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    doubleTapWindow <span class=\"sy0\">=</span> constrain<span class=\"br0\">&#40;</span>doubleTapWindow<span class=\"sy0\">,</span>0<span class=\"sy0\">,</span>255<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    byte _b <span class=\"sy0\">=</span> byte <span class=\"br0\">&#40;</span>doubleTapWindow<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_WINDOW<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the Window register</span><br /><span class=\"kw4\">int</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getDoubleTapWindow</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_WINDOW<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"kw1\">return</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the THRESH_ACT byte which holds the threshold value for detecting activity.</span><br /><span class=\"co1\">// The data format is unsigned, so the magnitude of the activity event is compared </span><br /><span class=\"co1\">// with the value is compared with the value in the THRESH_ACT register. The scale</span><br /><span class=\"co1\">// factor is 62.5mg/LSB. A value of 0 may result in undesirable behavior if the </span><br /><span class=\"co1\">// activity interrupt is enabled. The maximum value is 255.</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setActivityThreshold</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> activityThreshold<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    activityThreshold <span class=\"sy0\">=</span> constrain<span class=\"br0\">&#40;</span>activityThreshold<span class=\"sy0\">,</span>0<span class=\"sy0\">,</span>255<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    byte _b <span class=\"sy0\">=</span> byte <span class=\"br0\">&#40;</span>activityThreshold<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_THRESH_ACT<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the THRESH_ACT byte</span><br /><span class=\"kw4\">int</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getActivityThreshold</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_THRESH_ACT<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"kw1\">return</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the THRESH_INACT byte which holds the threshold value for detecting inactivity.</span><br /><span class=\"co1\">// The data format is unsigned, so the magnitude of the inactivity event is compared </span><br /><span class=\"co1\">// with the value is compared with the value in the THRESH_INACT register. The scale</span><br /><span class=\"co1\">// factor is 62.5mg/LSB. A value of 0 may result in undesirable behavior if the </span><br /><span class=\"co1\">// inactivity interrupt is enabled. The maximum value is 255.</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setInactivityThreshold</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> inactivityThreshold<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    inactivityThreshold <span class=\"sy0\">=</span> constrain<span class=\"br0\">&#40;</span>inactivityThreshold<span class=\"sy0\">,</span>0<span class=\"sy0\">,</span>255<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    byte _b <span class=\"sy0\">=</span> byte <span class=\"br0\">&#40;</span>inactivityThreshold<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_THRESH_INACT<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the THRESH_INACT byte</span><br /><span class=\"kw4\">int</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getInactivityThreshold</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_THRESH_INACT<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"kw1\">return</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the TIME_INACT register, which contains an unsigned time value representing the</span><br /><span class=\"co1\">// amount of time that acceleration must be less thant the value in the THRESH_INACT</span><br /><span class=\"co1\">// register for inactivity to be declared. The scale factor is 1sec/LSB. The value must</span><br /><span class=\"co1\">// be between 0 and 255.</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setTimeInactivity</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> timeInactivity<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    timeInactivity <span class=\"sy0\">=</span> constrain<span class=\"br0\">&#40;</span>timeInactivity<span class=\"sy0\">,</span>0<span class=\"sy0\">,</span>255<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    byte _b <span class=\"sy0\">=</span> byte <span class=\"br0\">&#40;</span>timeInactivity<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_TIME_INACT<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the TIME_INACT register</span><br /><span class=\"kw4\">int</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getTimeInactivity</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_TIME_INACT<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"kw1\">return</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the THRESH_FF register which holds the threshold value, in an unsigned format, for</span><br /><span class=\"co1\">// free-fall detection. The root-sum-square (RSS) value of all axes is calculated and</span><br /><span class=\"co1\">// compared whith the value in THRESH_FF to determine if a free-fall event occured. The </span><br /><span class=\"co1\">// scale factor is 62.5mg/LSB. A value of 0 may result in undesirable behavior if the free-fall</span><br /><span class=\"co1\">// interrupt is enabled. The maximum value is 255.</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setFreeFallThreshold</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> freeFallThreshold<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    freeFallThreshold <span class=\"sy0\">=</span> constrain<span class=\"br0\">&#40;</span>freeFallThreshold<span class=\"sy0\">,</span>0<span class=\"sy0\">,</span>255<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    byte _b <span class=\"sy0\">=</span> byte <span class=\"br0\">&#40;</span>freeFallThreshold<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_THRESH_FF<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the THRESH_FF register.</span><br /><span class=\"kw4\">int</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getFreeFallThreshold</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_THRESH_FF<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"kw1\">return</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Sets the TIME_FF register, which holds an unsigned time value representing the minimum</span><br /><span class=\"co1\">// time that the RSS value of all axes must be less than THRESH_FF to generate a free-fall </span><br /><span class=\"co1\">// interrupt. The scale factor is 5ms/LSB. A value of 0 may result in undesirable behavior if</span><br /><span class=\"co1\">// the free-fall interrupt is enabled. The maximum value is 255.</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setFreeFallDuration</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> freeFallDuration<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    freeFallDuration <span class=\"sy0\">=</span> constrain<span class=\"br0\">&#40;</span>freeFallDuration<span class=\"sy0\">,</span>0<span class=\"sy0\">,</span>255<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    byte _b <span class=\"sy0\">=</span> byte <span class=\"br0\">&#40;</span>freeFallDuration<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeTo<span class=\"br0\">&#40;</span>ADXL345_TIME_FF<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Gets the TIME_FF register.</span><br /><span class=\"kw4\">int</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getFreeFallDuration</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_TIME_FF<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <span class=\"kw1\">return</span> <span class=\"kw4\">int</span> <span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isActivityXEnabled</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 6<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isActivityYEnabled</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 5<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isActivityZEnabled</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 4<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isInactivityXEnabled</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 2<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isInactivityYEnabled</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isInactivityZEnabled</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 0<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setActivityX</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 6<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setActivityY</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 5<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setActivityZ</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 4<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setInactivityX</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 2<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setInactivityY</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setInactivityZ</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 0<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isActivityAc</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 7<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isInactivityAc</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 3<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setActivityAc</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 7<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setInactivityAc</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_INACT_CTL<span class=\"sy0\">,</span> 3<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getSuppressBit</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_TAP_AXES<span class=\"sy0\">,</span> 3<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setSuppressBit</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_TAP_AXES<span class=\"sy0\">,</span> 3<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isTapDetectionOnX</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_TAP_AXES<span class=\"sy0\">,</span> 2<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setTapDetectionOnX</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_TAP_AXES<span class=\"sy0\">,</span> 2<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isTapDetectionOnY</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_TAP_AXES<span class=\"sy0\">,</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setTapDetectionOnY</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_TAP_AXES<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isTapDetectionOnZ</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_TAP_AXES<span class=\"sy0\">,</span> 0<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setTapDetectionOnZ</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_TAP_AXES<span class=\"sy0\">,</span> 0<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isActivitySourceOnX</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_TAP_STATUS<span class=\"sy0\">,</span> 6<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isActivitySourceOnY</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_TAP_STATUS<span class=\"sy0\">,</span> 5<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isActivitySourceOnZ</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_TAP_STATUS<span class=\"sy0\">,</span> 4<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isTapSourceOnX</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_TAP_STATUS<span class=\"sy0\">,</span> 2<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isTapSourceOnY</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_TAP_STATUS<span class=\"sy0\">,</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isTapSourceOnZ</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_TAP_STATUS<span class=\"sy0\">,</span> 0<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isAsleep</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_ACT_TAP_STATUS<span class=\"sy0\">,</span> 3<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isLowPower</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_BW_RATE<span class=\"sy0\">,</span> 4<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setLowPower</span><span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_BW_RATE<span class=\"sy0\">,</span> 4<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">double</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getRate</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_BW_RATE<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    _b <span class=\"sy0\">&amp;=</span> B00001111<span class=\"sy0\">;</span><br />    <span class=\"kw1\">return</span> <span class=\"br0\">&#40;</span>pow<span class=\"br0\">&#40;</span>2<span class=\"sy0\">,</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span><span class=\"br0\">&#41;</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">-</span>6<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span> <span class=\"sy0\">*</span> <span class=\"nu16\">6.25</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setRate</span><span class=\"br0\">&#40;</span><span class=\"kw4\">double</span> rate<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">,</span>_s<span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> v <span class=\"sy0\">=</span> <span class=\"br0\">&#40;</span><span class=\"kw4\">int</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#40;</span>rate <span class=\"sy0\">/</span> 6.25<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> r <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br />    <span class=\"kw1\">while</span> <span class=\"br0\">&#40;</span>v <span class=\"sy0\">&gt;&gt;=</span> 1<span class=\"br0\">&#41;</span><br />    <span class=\"br0\">&#123;</span><br />        r<span class=\"sy0\">++;</span><br />    <span class=\"br0\">&#125;</span><br />    <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>r <span class=\"sy0\">&lt;=</span> 9<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span> <br />        readFrom<span class=\"br0\">&#40;</span>ADXL345_BW_RATE<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />        _s <span class=\"sy0\">=</span> <span class=\"br0\">&#40;</span>byte<span class=\"br0\">&#41;</span> <span class=\"br0\">&#40;</span>r <span class=\"sy0\">+</span> 6<span class=\"br0\">&#41;</span> <span class=\"sy0\">|</span> <span class=\"br0\">&#40;</span>_b <span class=\"sy0\">&amp;</span> B11110000<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />        writeTo<span class=\"br0\">&#40;</span>ADXL345_BW_RATE<span class=\"sy0\">,</span> _s<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"br0\">&#125;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">set_bw</span><span class=\"br0\">&#40;</span>byte bw_code<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">if</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>bw_code <span class=\"sy0\">&lt;</span> ADXL345_BW_3<span class=\"br0\">&#41;</span> <span class=\"sy0\">||</span> <span class=\"br0\">&#40;</span>bw_code <span class=\"sy0\">&gt;</span> ADXL345_BW_1600<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />        status <span class=\"sy0\">=</span> <span class=\"kw2\">false</span><span class=\"sy0\">;</span><br />        error_code <span class=\"sy0\">=</span> ADXL345_BAD_ARG<span class=\"sy0\">;</span><br />    <span class=\"br0\">&#125;</span><br />    <span class=\"kw1\">else</span><span class=\"br0\">&#123;</span><br />        writeTo<span class=\"br0\">&#40;</span>ADXL345_BW_RATE<span class=\"sy0\">,</span> bw_code<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"br0\">&#125;</span><br /><span class=\"br0\">&#125;</span><br /><br />byte ADXL345<span class=\"sy0\">::</span><span class=\"me2\">get_bw_code</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    byte bw_code<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_BW_RATE<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>bw_code<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw1\">return</span> bw_code<span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><br /><br /><br /><br /><span class=\"co1\">//Used to check if action was triggered in interrupts</span><br /><span class=\"co1\">//Example triggered(interrupts, ADXL345_SINGLE_TAP);</span><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">triggered</span><span class=\"br0\">&#40;</span>byte interrupts<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> mask<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">return</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>interrupts <span class=\"sy0\">&gt;&gt;</span> mask<span class=\"br0\">&#41;</span> <span class=\"sy0\">&amp;</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><br /><span class=\"coMULTI\">/*<br />ADXL345_DATA_READY<br />ADXL345_SINGLE_TAP<br />ADXL345_DOUBLE_TAP<br />ADXL345_ACTIVITY<br />ADXL345_INACTIVITY<br />ADXL345_FREE_FALL<br />ADXL345_WATERMARK<br />ADXL345_OVERRUNY<br />*/</span><br /><br /><br /><br /><br /><br />byte ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getInterruptSource</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>ADXL345_INT_SOURCE<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw1\">return</span> _b<span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getInterruptSource</span><span class=\"br0\">&#40;</span>byte interruptBit<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_INT_SOURCE<span class=\"sy0\">,</span>interruptBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getInterruptMapping</span><span class=\"br0\">&#40;</span>byte interruptBit<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_INT_MAP<span class=\"sy0\">,</span>interruptBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Set the mapping of an interrupt to pin1 or pin2</span><br /><span class=\"co1\">// eg: setInterruptMapping(ADXL345_INT_DOUBLE_TAP_BIT,ADXL345_INT2_PIN);</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setInterruptMapping</span><span class=\"br0\">&#40;</span>byte interruptBit<span class=\"sy0\">,</span> bool interruptPin<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_INT_MAP<span class=\"sy0\">,</span> interruptBit<span class=\"sy0\">,</span> interruptPin<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">isInterruptEnabled</span><span class=\"br0\">&#40;</span>byte interruptBit<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    <span class=\"kw1\">return</span> getRegisterBit<span class=\"br0\">&#40;</span>ADXL345_INT_ENABLE<span class=\"sy0\">,</span>interruptBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setInterrupt</span><span class=\"br0\">&#40;</span>byte interruptBit<span class=\"sy0\">,</span> bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    setRegisterBit<span class=\"br0\">&#40;</span>ADXL345_INT_ENABLE<span class=\"sy0\">,</span> interruptBit<span class=\"sy0\">,</span> state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">setRegisterBit</span><span class=\"br0\">&#40;</span>byte regAdress<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> bitPos<span class=\"sy0\">,</span> bool state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>regAdress<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>state<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />        _b <span class=\"sy0\">|=</span> <span class=\"br0\">&#40;</span>1 <span class=\"sy0\">&lt;&lt;</span> bitPos<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// forces nth bit of _b to be 1. all other bits left alone.</span><br />    <span class=\"br0\">&#125;</span> <br />    <span class=\"kw1\">else</span> <span class=\"br0\">&#123;</span><br />        _b <span class=\"sy0\">&amp;=</span> ~<span class=\"br0\">&#40;</span>1 <span class=\"sy0\">&lt;&lt;</span> bitPos<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// forces nth bit of _b to be 0. all other bits left alone.</span><br />    <span class=\"br0\">&#125;</span><br />    writeTo<span class=\"br0\">&#40;</span>regAdress<span class=\"sy0\">,</span> _b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br />bool ADXL345<span class=\"sy0\">::</span><span class=\"me2\">getRegisterBit</span><span class=\"br0\">&#40;</span>byte regAdress<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> bitPos<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>regAdress<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw1\">return</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>_b <span class=\"sy0\">&gt;&gt;</span> bitPos<span class=\"br0\">&#41;</span> <span class=\"sy0\">&amp;</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// print all register value to the serial ouptut, which requires it to be setup</span><br /><span class=\"co1\">// this can be used to manually to check the current configuration of the device</span><br /><span class=\"kw4\">void</span> ADXL345<span class=\"sy0\">::</span><span class=\"me2\">printAllRegister</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    byte _b<span class=\"sy0\">;</span><br />    Serial.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;0x00: &quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    readFrom<span class=\"br0\">&#40;</span>0x00<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    print_byte<span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    Serial.<span class=\"me1\">println</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> i<span class=\"sy0\">;</span><br />    <span class=\"kw1\">for</span> <span class=\"br0\">&#40;</span>i<span class=\"sy0\">=</span><span class=\"nu0\">29</span><span class=\"sy0\">;</span>i<span class=\"sy0\">&lt;=</span><span class=\"nu0\">57</span><span class=\"sy0\">;</span>i<span class=\"sy0\">++</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />        Serial.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;0x&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />        Serial.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span>i<span class=\"sy0\">,</span> HEX<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />        Serial.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;: &quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />        readFrom<span class=\"br0\">&#40;</span>i<span class=\"sy0\">,</span> 1<span class=\"sy0\">,</span> <span class=\"sy0\">&amp;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />        print_byte<span class=\"br0\">&#40;</span>_b<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />        Serial.<span class=\"me1\">println</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span>  <br />    <span class=\"br0\">&#125;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> print_byte<span class=\"br0\">&#40;</span>byte val<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    <span class=\"kw4\">int</span> i<span class=\"sy0\">;</span><br />    Serial.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;B&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw1\">for</span><span class=\"br0\">&#40;</span>i<span class=\"sy0\">=</span><span class=\"nu0\">7</span><span class=\"sy0\">;</span> i<span class=\"sy0\">&gt;=</span><span class=\"nu0\">0</span><span class=\"sy0\">;</span> i<span class=\"sy0\">--</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />        Serial.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span>val <span class=\"sy0\">&gt;&gt;</span> i <span class=\"sy0\">&amp;</span> 1<span class=\"sy0\">,</span> BIN<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"br0\">&#125;</span><br /><span class=\"br0\">&#125;</span></code></pre>  </div>  </div>  </div>      <div class=\"fileWrapper h\" id=\"9ee89311a1931725d8a4e270cee47390a006b93f\">  <p class=\"fileHead\">ADXL345.h</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br />161<br />162<br />163<br />164<br />165<br />166<br />167<br />168<br />169<br />170<br />171<br />172<br />173<br />174<br />175<br />176<br />177<br />178<br />179<br />180<br />181<br />182<br />183<br />184<br />185<br />186<br />187<br />188<br />189<br />190<br />191<br />192<br />193<br />194<br />195<br />196<br />197<br />198<br />199<br />200<br />201<br />202<br />203<br />204<br />205<br />206<br />207<br />208<br />209<br />210<br />211<br />212<br />213<br />214<br />215<br />216<br />217<br />218<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code><span class=\"coMULTI\">/**************************************************************************<br />*                                     *<br />* ADXL345 Driver for Arduino                       *<br />*                                     *<br />***************************************************************************<br />*                                     * <br />* This program is free software; you can redistribute it and/or modify  *<br />* it under the terms of the GNU License.                 *<br />* This program is distributed in the hope that it will be useful,     *<br />* but WITHOUT ANY WARRANTY; without even the implied warranty of     *<br />* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the      *<br />* GNU License V2 for more details.                    *<br />*                                     *<br />***************************************************************************/</span><br /><span class=\"co2\">#include &quot;Arduino.h&quot;</span><br /><br /><span class=\"co2\">#ifndef ADXL345_h</span><br /><span class=\"co2\">#define ADXL345_h</span><br /><br /><span class=\"coMULTI\">/* ------- Register names ------- */</span><br /><span class=\"co2\">#define ADXL345_DEVID 0x00</span><br /><span class=\"co2\">#define ADXL345_RESERVED1 0x01</span><br /><span class=\"co2\">#define ADXL345_THRESH_TAP 0x1d</span><br /><span class=\"co2\">#define ADXL345_OFSX 0x1e</span><br /><span class=\"co2\">#define ADXL345_OFSY 0x1f</span><br /><span class=\"co2\">#define ADXL345_OFSZ 0x20</span><br /><span class=\"co2\">#define ADXL345_DUR 0x21</span><br /><span class=\"co2\">#define ADXL345_LATENT 0x22</span><br /><span class=\"co2\">#define ADXL345_WINDOW 0x23</span><br /><span class=\"co2\">#define ADXL345_THRESH_ACT 0x24</span><br /><span class=\"co2\">#define ADXL345_THRESH_INACT 0x25</span><br /><span class=\"co2\">#define ADXL345_TIME_INACT 0x26</span><br /><span class=\"co2\">#define ADXL345_ACT_INACT_CTL 0x27</span><br /><span class=\"co2\">#define ADXL345_THRESH_FF 0x28</span><br /><span class=\"co2\">#define ADXL345_TIME_FF 0x29</span><br /><span class=\"co2\">#define ADXL345_TAP_AXES 0x2a</span><br /><span class=\"co2\">#define ADXL345_ACT_TAP_STATUS 0x2b</span><br /><span class=\"co2\">#define ADXL345_BW_RATE 0x2c</span><br /><span class=\"co2\">#define ADXL345_POWER_CTL 0x2d</span><br /><span class=\"co2\">#define ADXL345_INT_ENABLE 0x2e</span><br /><span class=\"co2\">#define ADXL345_INT_MAP 0x2f</span><br /><span class=\"co2\">#define ADXL345_INT_SOURCE 0x30</span><br /><span class=\"co2\">#define ADXL345_DATA_FORMAT 0x31</span><br /><span class=\"co2\">#define ADXL345_DATAX0 0x32</span><br /><span class=\"co2\">#define ADXL345_DATAX1 0x33</span><br /><span class=\"co2\">#define ADXL345_DATAY0 0x34</span><br /><span class=\"co2\">#define ADXL345_DATAY1 0x35</span><br /><span class=\"co2\">#define ADXL345_DATAZ0 0x36</span><br /><span class=\"co2\">#define ADXL345_DATAZ1 0x37</span><br /><span class=\"co2\">#define ADXL345_FIFO_CTL 0x38</span><br /><span class=\"co2\">#define ADXL345_FIFO_STATUS 0x39</span><br /><br /><span class=\"co2\">#define ADXL345_BW_1600 0xF // 1111</span><br /><span class=\"co2\">#define ADXL345_BW_800 0xE // 1110</span><br /><span class=\"co2\">#define ADXL345_BW_400 0xD // 1101 </span><br /><span class=\"co2\">#define ADXL345_BW_200 0xC // 1100</span><br /><span class=\"co2\">#define ADXL345_BW_100 0xB // 1011 </span><br /><span class=\"co2\">#define ADXL345_BW_50  0xA // 1010 </span><br /><span class=\"co2\">#define ADXL345_BW_25  0x9 // 1001 </span><br /><span class=\"co2\">#define ADXL345_BW_12  0x8 // 1000 </span><br /><span class=\"co2\">#define ADXL345_BW_6  0x7 // 0111</span><br /><span class=\"co2\">#define ADXL345_BW_3  0x6 // 0110</span><br /><br /><br /><span class=\"coMULTI\">/* <br />Interrupt PINs<br />INT1: 0<br />INT2: 1<br />*/</span><br /><span class=\"co2\">#define ADXL345_INT1_PIN 0x00</span><br /><span class=\"co2\">#define ADXL345_INT2_PIN 0x01</span><br /><br /><span class=\"coMULTI\">/* <br />Interrupt bit position<br />*/</span><br /><span class=\"co2\">#define ADXL345_INT_DATA_READY_BIT 0x07</span><br /><span class=\"co2\">#define ADXL345_INT_SINGLE_TAP_BIT 0x06</span><br /><span class=\"co2\">#define ADXL345_INT_DOUBLE_TAP_BIT 0x05</span><br /><span class=\"co2\">#define ADXL345_INT_ACTIVITY_BIT  0x04</span><br /><span class=\"co2\">#define ADXL345_INT_INACTIVITY_BIT 0x03</span><br /><span class=\"co2\">#define ADXL345_INT_FREE_FALL_BIT 0x02</span><br /><span class=\"co2\">#define ADXL345_INT_WATERMARK_BIT 0x01</span><br /><span class=\"co2\">#define ADXL345_INT_OVERRUNY_BIT  0x00</span><br /><br /><span class=\"co2\">#define ADXL345_DATA_READY 0x07</span><br /><span class=\"co2\">#define ADXL345_SINGLE_TAP 0x06</span><br /><span class=\"co2\">#define ADXL345_DOUBLE_TAP 0x05</span><br /><span class=\"co2\">#define ADXL345_ACTIVITY  0x04</span><br /><span class=\"co2\">#define ADXL345_INACTIVITY 0x03</span><br /><span class=\"co2\">#define ADXL345_FREE_FALL 0x02</span><br /><span class=\"co2\">#define ADXL345_WATERMARK 0x01</span><br /><span class=\"co2\">#define ADXL345_OVERRUNY  0x00</span><br /><br /><br /><br /><br /><span class=\"co2\">#define ADXL345_OK  1 // no error</span><br /><span class=\"co2\">#define ADXL345_ERROR 0 // indicates error is predent</span><br /><br /><span class=\"co2\">#define ADXL345_NO_ERROR  0 // initial state</span><br /><span class=\"co2\">#define ADXL345_READ_ERROR 1 // problem reading accel</span><br /><span class=\"co2\">#define ADXL345_BAD_ARG  2 // bad method argument</span><br /><br /><br />class ADXL345<br /><span class=\"br0\">&#123;</span><br />public<span class=\"sy0\">:</span><br />    bool status<span class=\"sy0\">;</span>      <span class=\"co1\">// set when error occurs </span><br />    <span class=\"co1\">// see error code for details</span><br />    byte error_code<span class=\"sy0\">;</span>    <span class=\"co1\">// Initial state</span><br />    <span class=\"kw4\">double</span> gains<span class=\"br0\">&#91;</span>3<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span>    <span class=\"co1\">// counts to Gs</span><br />    <br />    ADXL345<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> powerOn<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> readAccel<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span><span class=\"sy0\">*</span> xyx<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> readAccel<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span><span class=\"sy0\">*</span> x<span class=\"sy0\">,</span> <span class=\"kw4\">int</span><span class=\"sy0\">*</span> y<span class=\"sy0\">,</span> <span class=\"kw4\">int</span><span class=\"sy0\">*</span> z<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> get_Gxyz<span class=\"br0\">&#40;</span><span class=\"kw4\">double</span> <span class=\"sy0\">*</span>xyz<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    <span class=\"kw4\">void</span> setTapThreshold<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> tapThreshold<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> getTapThreshold<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setAxisGains<span class=\"br0\">&#40;</span><span class=\"kw4\">double</span> <span class=\"sy0\">*</span>_gains<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> getAxisGains<span class=\"br0\">&#40;</span><span class=\"kw4\">double</span> <span class=\"sy0\">*</span>_gains<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setAxisOffset<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> x<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> y<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> z<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> getAxisOffset<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span><span class=\"sy0\">*</span> x<span class=\"sy0\">,</span> <span class=\"kw4\">int</span><span class=\"sy0\">*</span> y<span class=\"sy0\">,</span> <span class=\"kw4\">int</span><span class=\"sy0\">*</span>z<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setTapDuration<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> tapDuration<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> getTapDuration<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setDoubleTapLatency<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> doubleTapLatency<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> getDoubleTapLatency<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setDoubleTapWindow<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> doubleTapWindow<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> getDoubleTapWindow<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setActivityThreshold<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> activityThreshold<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> getActivityThreshold<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setInactivityThreshold<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> inactivityThreshold<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> getInactivityThreshold<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setTimeInactivity<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> timeInactivity<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> getTimeInactivity<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setFreeFallThreshold<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> freeFallthreshold<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> getFreeFallThreshold<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setFreeFallDuration<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> freeFallDuration<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> getFreeFallDuration<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    bool isActivityXEnabled<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isActivityYEnabled<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isActivityZEnabled<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isInactivityXEnabled<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isInactivityYEnabled<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isInactivityZEnabled<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isActivityAc<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isInactivityAc<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setActivityAc<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setInactivityAc<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    bool getSuppressBit<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setSuppressBit<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isTapDetectionOnX<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setTapDetectionOnX<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isTapDetectionOnY<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setTapDetectionOnY<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isTapDetectionOnZ<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setTapDetectionOnZ<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    <span class=\"kw4\">void</span> setActivityX<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setActivityY<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setActivityZ<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setInactivityX<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setInactivityY<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setInactivityZ<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    bool isActivitySourceOnX<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isActivitySourceOnY<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isActivitySourceOnZ<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isTapSourceOnX<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isTapSourceOnY<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isTapSourceOnZ<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isAsleep<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    bool isLowPower<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setLowPower<span class=\"br0\">&#40;</span>bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">double</span> getRate<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setRate<span class=\"br0\">&#40;</span><span class=\"kw4\">double</span> rate<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> set_bw<span class=\"br0\">&#40;</span>byte bw_code<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    byte get_bw_code<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    <br />    <br />    bool triggered<span class=\"br0\">&#40;</span>byte interrupts<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> mask<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    <br />    byte getInterruptSource<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool getInterruptSource<span class=\"br0\">&#40;</span>byte interruptBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool getInterruptMapping<span class=\"br0\">&#40;</span>byte interruptBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setInterruptMapping<span class=\"br0\">&#40;</span>byte interruptBit<span class=\"sy0\">,</span> bool interruptPin<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool isInterruptEnabled<span class=\"br0\">&#40;</span>byte interruptBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setInterrupt<span class=\"br0\">&#40;</span>byte interruptBit<span class=\"sy0\">,</span> bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    <span class=\"kw4\">void</span> getRangeSetting<span class=\"br0\">&#40;</span>byte<span class=\"sy0\">*</span> rangeSetting<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setRangeSetting<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> val<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool getSelfTestBit<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setSelfTestBit<span class=\"br0\">&#40;</span>bool selfTestBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool getSpiBit<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setSpiBit<span class=\"br0\">&#40;</span>bool spiBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool getInterruptLevelBit<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setInterruptLevelBit<span class=\"br0\">&#40;</span>bool interruptLevelBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool getFullResBit<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setFullResBit<span class=\"br0\">&#40;</span>bool fullResBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool getJustifyBit<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setJustifyBit<span class=\"br0\">&#40;</span>bool justifyBit<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> printAllRegister<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />private<span class=\"sy0\">:</span><br />    <span class=\"kw4\">void</span> writeTo<span class=\"br0\">&#40;</span>byte address<span class=\"sy0\">,</span> byte val<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> readFrom<span class=\"br0\">&#40;</span>byte address<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> num<span class=\"sy0\">,</span> byte buff<span class=\"br0\">&#91;</span><span class=\"br0\">&#93;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">void</span> setRegisterBit<span class=\"br0\">&#40;</span>byte regAdress<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> bitPos<span class=\"sy0\">,</span> bool state<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    bool getRegisterBit<span class=\"br0\">&#40;</span>byte regAdress<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> bitPos<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br />    byte _buff<span class=\"br0\">&#91;</span>6<span class=\"br0\">&#93;</span> <span class=\"sy0\">;</span>  <span class=\"co1\">//6 bytes buffer for saving data read from the device</span><br /><span class=\"br0\">&#125;</span><span class=\"sy0\">;</span><br /><span class=\"kw4\">void</span> print_byte<span class=\"br0\">&#40;</span>byte val<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"co2\">#endif</span></code></pre>  </div>  </div>  </div>      <div class=\"fileWrapper txt\" id=\"25e216a7063f10f19bf5b77b3a351f5bbd62e268\">  <p class=\"fileHead\">License.txt</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br />161<br />162<br />163<br />164<br />165<br />166<br />167<br />168<br />169<br />170<br />171<br />172<br />173<br />174<br />175<br />176<br />177<br />178<br />179<br />180<br />181<br />182<br />183<br />184<br />185<br />186<br />187<br />188<br />189<br />190<br />191<br />192<br />193<br />194<br />195<br />196<br />197<br />198<br />199<br />200<br />201<br />202<br />203<br />204<br />205<br />206<br />207<br />208<br />209<br />210<br />211<br />212<br />213<br />214<br />215<br />216<br />217<br />218<br />219<br />220<br />221<br />222<br />223<br />224<br />225<br />226<br />227<br />228<br />229<br />230<br />231<br />232<br />233<br />234<br />235<br />236<br />237<br />238<br />239<br />240<br />241<br />242<br />243<br />244<br />245<br />246<br />247<br />248<br />249<br />250<br />251<br />252<br />253<br />254<br />255<br />256<br />257<br />258<br />259<br />260<br />261<br />262<br />263<br />264<br />265<br />266<br />267<br />268<br />269<br />270<br />271<br />272<br />273<br />274<br />275<br />276<br />277<br />278<br />279<br />280<br />281<br />282<br />283<br />284<br />285<br />286<br />287<br />288<br />289<br />290<br />291<br />292<br />293<br />294<br />295<br />296<br />297<br />298<br />299<br />300<br />301<br />302<br />303<br />304<br />305<br />306<br />307<br />308<br />309<br />310<br />311<br />312<br />313<br />314<br />315<br />316<br />317<br />318<br />319<br />320<br />321<br />322<br />323<br />324<br />325<br />326<br />327<br />328<br />329<br />330<br />331<br />332<br />333<br />334<br />335<br />336<br />337<br />338<br />339<br />340<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code>GNU GENERAL PUBLIC LICENSE<br />           Version 2, June 1991<br /><br />Copyright (C) 1989, 1991 Free Software Foundation, Inc.,<br />51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA<br />Everyone is permitted to copy and distribute verbatim copies<br />of this license document, but changing it is not allowed.<br /><br />              Preamble<br /><br /> The licenses for most software are designed to take away your<br />freedom to share and change it. By contrast, the GNU General Public<br />License is intended to guarantee your freedom to share and change free<br />software--to make sure the software is free for all its users. This<br />General Public License applies to most of the Free Software<br />Foundation\'s software and to any other program whose authors commit to<br />using it. (Some other Free Software Foundation software is covered by<br />the GNU Lesser General Public License instead.) You can apply it to<br />your programs, too.<br /><br /> When we speak of free software, we are referring to freedom, not<br />price. Our General Public Licenses are designed to make sure that you<br />have the freedom to distribute copies of free software (and charge for<br />this service if you wish), that you receive source code or can get it<br />if you want it, that you can change the software or use pieces of it<br />in new free programs; and that you know you can do these things.<br /><br /> To protect your rights, we need to make restrictions that forbid<br />anyone to deny you these rights or to ask you to surrender the rights.<br />These restrictions translate to certain responsibilities for you if you<br />distribute copies of the software, or if you modify it.<br /><br /> For example, if you distribute copies of such a program, whether<br />gratis or for a fee, you must give the recipients all the rights that<br />you have. You must make sure that they, too, receive or can get the<br />source code. And you must show them these terms so they know their<br />rights.<br /><br /> We protect your rights with two steps: (1) copyright the software, and<br />(2) offer you this license which gives you legal permission to copy,<br />distribute and/or modify the software.<br /><br /> Also, for each author\'s protection and ours, we want to make certain<br />that everyone understands that there is no warranty for this free<br />software. If the software is modified by someone else and passed on, we<br />want its recipients to know that what they have is not the original, so<br />that any problems introduced by others will not reflect on the original<br />authors\' reputations.<br /><br /> Finally, any free program is threatened constantly by software<br />patents. We wish to avoid the danger that redistributors of a free<br />program will individually obtain patent licenses, in effect making the<br />program proprietary. To prevent this, we have made it clear that any<br />patent must be licensed for everyone\'s free use or not licensed at all.<br /><br /> The precise terms and conditions for copying, distribution and<br />modification follow.<br /><br />          GNU GENERAL PUBLIC LICENSE<br /> TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION<br /><br /> 0. This License applies to any program or other work which contains<br />a notice placed by the copyright holder saying it may be distributed<br />under the terms of this General Public License. The &quot;Program&quot;, below,<br />refers to any such program or work, and a &quot;work based on the Program&quot;<br />means either the Program or any derivative work under copyright law:<br />that is to say, a work containing the Program or a portion of it,<br />either verbatim or with modifications and/or translated into another<br />language. (Hereinafter, translation is included without limitation in<br />the term &quot;modification&quot;.) Each licensee is addressed as &quot;you&quot;.<br /><br />Activities other than copying, distribution and modification are not<br />covered by this License; they are outside its scope. The act of<br />running the Program is not restricted, and the output from the Program<br />is covered only if its contents constitute a work based on the<br />Program (independent of having been made by running the Program).<br />Whether that is true depends on what the Program does.<br /><br /> 1. You may copy and distribute verbatim copies of the Program\'s<br />source code as you receive it, in any medium, provided that you<br />conspicuously and appropriately publish on each copy an appropriate<br />copyright notice and disclaimer of warranty; keep intact all the<br />notices that refer to this License and to the absence of any warranty;<br />and give any other recipients of the Program a copy of this License<br />along with the Program.<br /><br />You may charge a fee for the physical act of transferring a copy, and<br />you may at your option offer warranty protection in exchange for a fee.<br /><br /> 2. You may modify your copy or copies of the Program or any portion<br />of it, thus forming a work based on the Program, and copy and<br />distribute such modifications or work under the terms of Section 1<br />above, provided that you also meet all of these conditions:<br /><br />  a) You must cause the modified files to carry prominent notices<br />  stating that you changed the files and the date of any change.<br /><br />  b) You must cause any work that you distribute or publish, that in<br />  whole or in part contains or is derived from the Program or any<br />  part thereof, to be licensed as a whole at no charge to all third<br />  parties under the terms of this License.<br /><br />  c) If the modified program normally reads commands interactively<br />  when run, you must cause it, when started running for such<br />  interactive use in the most ordinary way, to print or display an<br />  announcement including an appropriate copyright notice and a<br />  notice that there is no warranty (or else, saying that you provide<br />  a warranty) and that users may redistribute the program under<br />  these conditions, and telling the user how to view a copy of this<br />  License. (Exception: if the Program itself is interactive but<br />  does not normally print such an announcement, your work based on<br />  the Program is not required to print an announcement.)<br /><br />These requirements apply to the modified work as a whole. If<br />identifiable sections of that work are not derived from the Program,<br />and can be reasonably considered independent and separate works in<br />themselves, then this License, and its terms, do not apply to those<br />sections when you distribute them as separate works. But when you<br />distribute the same sections as part of a whole which is a work based<br />on the Program, the distribution of the whole must be on the terms of<br />this License, whose permissions for other licensees extend to the<br />entire whole, and thus to each and every part regardless of who wrote it.<br /><br />Thus, it is not the intent of this section to claim rights or contest<br />your rights to work written entirely by you; rather, the intent is to<br />exercise the right to control the distribution of derivative or<br />collective works based on the Program.<br /><br />In addition, mere aggregation of another work not based on the Program<br />with the Program (or with a work based on the Program) on a volume of<br />a storage or distribution medium does not bring the other work under<br />the scope of this License.<br /><br /> 3. You may copy and distribute the Program (or a work based on it,<br />under Section 2) in object code or executable form under the terms of<br />Sections 1 and 2 above provided that you also do one of the following:<br /><br />  a) Accompany it with the complete corresponding machine-readable<br />  source code, which must be distributed under the terms of Sections<br />  1 and 2 above on a medium customarily used for software interchange; or,<br /><br />  b) Accompany it with a written offer, valid for at least three<br />  years, to give any third party, for a charge no more than your<br />  cost of physically performing source distribution, a complete<br />  machine-readable copy of the corresponding source code, to be<br />  distributed under the terms of Sections 1 and 2 above on a medium<br />  customarily used for software interchange; or,<br /><br />  c) Accompany it with the information you received as to the offer<br />  to distribute corresponding source code. (This alternative is<br />  allowed only for noncommercial distribution and only if you<br />  received the program in object code or executable form with such<br />  an offer, in accord with Subsection b above.)<br /><br />The source code for a work means the preferred form of the work for<br />making modifications to it. For an executable work, complete source<br />code means all the source code for all modules it contains, plus any<br />associated interface definition files, plus the scripts used to<br />control compilation and installation of the executable. However, as a<br />special exception, the source code distributed need not include<br />anything that is normally distributed (in either source or binary<br />form) with the major components (compiler, kernel, and so on) of the<br />operating system on which the executable runs, unless that component<br />itself accompanies the executable.<br /><br />If distribution of executable or object code is made by offering<br />access to copy from a designated place, then offering equivalent<br />access to copy the source code from the same place counts as<br />distribution of the source code, even though third parties are not<br />compelled to copy the source along with the object code.<br /><br /> 4. You may not copy, modify, sublicense, or distribute the Program<br />except as expressly provided under this License. Any attempt<br />otherwise to copy, modify, sublicense or distribute the Program is<br />void, and will automatically terminate your rights under this License.<br />However, parties who have received copies, or rights, from you under<br />this License will not have their licenses terminated so long as such<br />parties remain in full compliance.<br /><br /> 5. You are not required to accept this License, since you have not<br />signed it. However, nothing else grants you permission to modify or<br />distribute the Program or its derivative works. These actions are<br />prohibited by law if you do not accept this License. Therefore, by<br />modifying or distributing the Program (or any work based on the<br />Program), you indicate your acceptance of this License to do so, and<br />all its terms and conditions for copying, distributing or modifying<br />the Program or works based on it.<br /><br /> 6. Each time you redistribute the Program (or any work based on the<br />Program), the recipient automatically receives a license from the<br />original licensor to copy, distribute or modify the Program subject to<br />these terms and conditions. You may not impose any further<br />restrictions on the recipients\' exercise of the rights granted herein.<br />You are not responsible for enforcing compliance by third parties to<br />this License.<br /><br /> 7. If, as a consequence of a court judgment or allegation of patent<br />infringement or for any other reason (not limited to patent issues),<br />conditions are imposed on you (whether by court order, agreement or<br />otherwise) that contradict the conditions of this License, they do not<br />excuse you from the conditions of this License. If you cannot<br />distribute so as to satisfy simultaneously your obligations under this<br />License and any other pertinent obligations, then as a consequence you<br />may not distribute the Program at all. For example, if a patent<br />license would not permit royalty-free redistribution of the Program by<br />all those who receive copies directly or indirectly through you, then<br />the only way you could satisfy both it and this License would be to<br />refrain entirely from distribution of the Program.<br /><br />If any portion of this section is held invalid or unenforceable under<br />any particular circumstance, the balance of the section is intended to<br />apply and the section as a whole is intended to apply in other<br />circumstances.<br /><br />It is not the purpose of this section to induce you to infringe any<br />patents or other property right claims or to contest validity of any<br />such claims; this section has the sole purpose of protecting the<br />integrity of the free software distribution system, which is<br />implemented by public license practices. Many people have made<br />generous contributions to the wide range of software distributed<br />through that system in reliance on consistent application of that<br />system; it is up to the author/donor to decide if he or she is willing<br />to distribute software through any other system and a licensee cannot<br />impose that choice.<br /><br />This section is intended to make thoroughly clear what is believed to<br />be a consequence of the rest of this License.<br /><br /> 8. If the distribution and/or use of the Program is restricted in<br />certain countries either by patents or by copyrighted interfaces, the<br />original copyright holder who places the Program under this License<br />may add an explicit geographical distribution limitation excluding<br />those countries, so that distribution is permitted only in or among<br />countries not thus excluded. In such case, this License incorporates<br />the limitation as if written in the body of this License.<br /><br /> 9. The Free Software Foundation may publish revised and/or new versions<br />of the General Public License from time to time. Such new versions will<br />be similar in spirit to the present version, but may differ in detail to<br />address new problems or concerns.<br /><br />Each version is given a distinguishing version number. If the Program<br />specifies a version number of this License which applies to it and &quot;any<br />later version&quot;, you have the option of following the terms and conditions<br />either of that version or of any later version published by the Free<br />Software Foundation. If the Program does not specify a version number of<br />this License, you may choose any version ever published by the Free Software<br />Foundation.<br /><br /> 10. If you wish to incorporate parts of the Program into other free<br />programs whose distribution conditions are different, write to the author<br />to ask for permission. For software which is copyrighted by the Free<br />Software Foundation, write to the Free Software Foundation; we sometimes<br />make exceptions for this. Our decision will be guided by the two goals<br />of preserving the free status of all derivatives of our free software and<br />of promoting the sharing and reuse of software generally.<br /><br />              NO WARRANTY<br /><br /> 11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY<br />FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT WHEN<br />OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES<br />PROVIDE THE PROGRAM &quot;AS IS&quot; WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED<br />OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF<br />MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS<br />TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE<br />PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,<br />REPAIR OR CORRECTION.<br /><br /> 12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING<br />WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR<br />REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,<br />INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING<br />OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED<br />TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY<br />YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER<br />PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE<br />POSSIBILITY OF SUCH DAMAGES.<br /><br />          END OF TERMS AND CONDITIONS<br /><br />      How to Apply These Terms to Your New Programs<br /><br /> If you develop a new program, and you want it to be of the greatest<br />possible use to the public, the best way to achieve this is to make it<br />free software which everyone can redistribute and change under these terms.<br /><br /> To do so, attach the following notices to the program. It is safest<br />to attach them to the start of each source file to most effectively<br />convey the exclusion of warranty; and each file should have at least<br />the &quot;copyright&quot; line and a pointer to where the full notice is found.<br /><br />  &lt;one line to give the program\'s name and a brief idea of what it does.&gt;<br />  Copyright (C) &lt;year&gt; &lt;name of author&gt;<br /><br />  This program is free software; you can redistribute it and/or modify<br />  it under the terms of the GNU General Public License as published by<br />  the Free Software Foundation; either version 2 of the License, or<br />  (at your option) any later version.<br /><br />  This program is distributed in the hope that it will be useful,<br />  but WITHOUT ANY WARRANTY; without even the implied warranty of<br />  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the<br />  GNU General Public License for more details.<br /><br />  You should have received a copy of the GNU General Public License along<br />  with this program; if not, write to the Free Software Foundation, Inc.,<br />  51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.<br /><br />Also add information on how to contact you by electronic and paper mail.<br /><br />If the program is interactive, make it output a short notice like this<br />when it starts in an interactive mode:<br /><br />  Gnomovision version 69, Copyright (C) year name of author<br />  Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w\'.<br />  This is free software, and you are welcome to redistribute it<br />  under certain conditions; type `show c\' for details.<br /><br />The hypothetical commands `show w\' and `show c\' should show the appropriate<br />parts of the General Public License. Of course, the commands you use may<br />be called something other than `show w\' and `show c\'; they could even be<br />mouse-clicks or menu items--whatever suits your program.<br /><br />You should also get your employer (if you work as a programmer) or your<br />school, if any, to sign a &quot;copyright disclaimer&quot; for the program, if<br />necessary. Here is a sample; alter the names:<br /><br /> Yoyodyne, Inc., hereby disclaims all copyright interest in the program<br /> `Gnomovision\' (which makes passes at compilers) written by James Hacker.<br /><br /> &lt;signature of Ty Coon&gt;, 1 April 1989<br /> Ty Coon, President of Vice<br /><br />This General Public License does not permit incorporating your program into<br />proprietary programs. If your program is a subroutine library, you may<br />consider it more useful to permit linking proprietary applications with the<br />library. If this is what you want to do, use the GNU Lesser General<br />Public License instead of this License.</code></pre>  </div>  </div>  </div>      <div class=\"fileWrapper txt\" id=\"b132efea8543fe82d1fd16a19298a9840f395e17\">  <p class=\"fileHead\">License.txt</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code>Copyright (c) 2010 bildr community<br /><br />Permission is hereby granted, free of charge, to any person obtaining a copy<br />of this software and associated documentation files (the &quot;Software&quot;), to deal<br />in the Software without restriction, including without limitation the rights<br />to use, copy, modify, merge, publish, distribute, sublicense, and/or sell<br />copies of the Software, and to permit persons to whom the Software is<br />furnished to do so, subject to the following conditions:<br /><br />The above copyright notice and this permission notice shall be included in<br />all copies or substantial portions of the Software.<br /><br />THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br />IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br />FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE<br />AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br />LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,<br />OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN<br />THE SOFTWARE.</code></pre>  </div>  </div>  </div>      <div class=\"fileWrapper md\" id=\"1626659dc665ada01bd823a3769b66499d490383\">  <p class=\"fileHead\">README.md</p>    <div class=\"fileCodeWrapper\">    <div class=\"code\">  <div class=\"markdown\"><h1>ADXL345</h1><p>Arduino code for the ADXL345 accelerometer </p><p>For complete hookup and tutorial see: <a href=\"http://adam-meyer.com/arduino/adxl335\">http://adam-meyer.com/arduino/adxl335</a></p><p>The code is provided under the MIT license please use, edit, change, and share. </p><p>The Adxl345 library has been modified for use with this example<br />The Adxl345 library however is provided under the GPL V2 license.  </p><p><em>Before loading the ADXLl345_example code, or even opening the arduino software, place the Adxl345 folder in your arduino library.</em></p><h5>ARDUINO LIBRARY LOCATION</h5><ul><li>On your Mac:: In (home directory)/Documents/Arduino/libraries  </li><li>On your PC:: My Documents -&gt; Arduino -&gt; libraries  </li><li>On your Linux box: (home directory)/sketchbook/libraries  </li></ul><p>For all my arduino articles: <a href=\"http://adam-meyer.com/arduino/\">http://adam-meyer.com/arduino/</a></p></div>  </div>  </div>  </div>    </div></div><div class=\"footer\">powered by <a title=\"github.com\" href=\"http://github.com\">github</a><!-- Served in 0.0048749446868896 sec - loaded from cache: yes - limitLeft:  of  --!></div></div>');
new Embed("ADXL345_sidebar", "ADXL345_code", {"sha":"bf6e63ab3b9320a1e3bbf703a2b9d800fb181374","url":"https:\/\/api.github.com\/repos\/ameyer\/ADXL345\/git\/trees\/bf6e63ab3b9320a1e3bbf703a2b9d800fb181374","tree":[{"path":"ADXL345_Example.ino","mode":"100755","type":"blob","sha":"4459d83e68a87ca731dc8d1df908a7b7fe003ae9","size":3525,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADXL345\/git\/blobs\/4459d83e68a87ca731dc8d1df908a7b7fe003ae9"},{"path":"Adxl345\/ADXL345.cpp","mode":"100755","type":"blob","sha":"9762e671ca8a40097de828ed7e686e27433648fb","size":18817,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADXL345\/git\/blobs\/9762e671ca8a40097de828ed7e686e27433648fb"},{"path":"Adxl345\/ADXL345.h","mode":"100755","type":"blob","sha":"9ee89311a1931725d8a4e270cee47390a006b93f","size":6731,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADXL345\/git\/blobs\/9ee89311a1931725d8a4e270cee47390a006b93f"},{"path":"Adxl345\/License.txt","mode":"100755","type":"blob","sha":"25e216a7063f10f19bf5b77b3a351f5bbd62e268","size":18071,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADXL345\/git\/blobs\/25e216a7063f10f19bf5b77b3a351f5bbd62e268"},{"path":"License.txt","mode":"100755","type":"blob","sha":"b132efea8543fe82d1fd16a19298a9840f395e17","size":1073,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADXL345\/git\/blobs\/b132efea8543fe82d1fd16a19298a9840f395e17"},{"path":"README.md","mode":"100644","type":"blob","sha":"1626659dc665ada01bd823a3769b66499d490383","size":755,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADXL345\/git\/blobs\/1626659dc665ada01bd823a3769b66499d490383"}],"truncated":false})

<!-- Served in 0.0060770511627197 sec - loaded from cache: yes - limitLeft:  of  --!>