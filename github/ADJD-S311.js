document.write('<link rel="stylesheet" href="../arduino/style/githubEmbed.css"/>');document.write('<link rel="stylesheet" href="../arduino/style/githubEmbed.css"/>');/*
---
script: Fx.Scroll.js
name: Fx.Scroll
description: Effect to smoothly scroll any element, including the window.
license: MIT-style license
authors:
  - Valerio Proietti
requires:
  - Core/Fx
  - Core/Element.Event
  - Core/Element.Dimensions
  - MooTools.More
provides: [Fx.Scroll]
...
*/

function GHE_isBody(element){
	return (/^(?:body|html)$/i).test(element.tagName);
}

Fx.Scroll = new Class({
	Extends: Fx,
	options: {
		offset: {x: 0, y: 0},
		wheelStops: true
	},
	initialize: function(element, options){
		this.element = this.subject = document.id(element);
		this.parent(options);
		if (typeOf(this.element) != 'element') this.element = document.id(this.element.getDocument().body);
		if (this.options.wheelStops){
			var stopper = this.element,
				cancel = this.cancel.pass(false, this);
			this.addEvent('start', function(){
				stopper.addEvent('mousewheel', cancel);
			}, true);
			this.addEvent('complete', function(){
				stopper.removeEvent('mousewheel', cancel);
			}, true);
		}
	},
	set: function(){
		var now = Array.flatten(arguments);
		if (Browser.firefox) now = [Math.round(now[0]), Math.round(now[1])]; // not needed anymore in newer firefox versions
		this.element.scrollTo(now[0], now[1]);
		return this;
	},
	compute: function(from, to, delta){
		return [0, 1].map(function(i){
			return Fx.compute(from[i], to[i], delta);
		});
	},
	start: function(x, y){
		if (!this.check(x, y)) return this;
		var scroll = this.element.getScroll();
		return this.parent([scroll.x, scroll.y], [x, y]);
	},
	calculateScroll: function(x, y){
		var element = this.element,
			scrollSize = element.getScrollSize(),
			scroll = element.getScroll(),
			size = element.getSize(),
			offset = this.options.offset,
			values = {x: x, y: y};
		for (var z in values){
			if (!values[z] && values[z] !== 0) values[z] = scroll[z];
			if (typeOf(values[z]) != 'number') values[z] = scrollSize[z] - size[z];
			values[z] += offset[z];
		}
		return [values.x, values.y];
	},
	toElement: function(el, axes){
		axes = axes ? Array.from(axes) : ['x', 'y'];
		var scroll = GHE_isBody(this.element) ? {x: 0, y: 0} : this.element.getScroll();
		var position = Object.map(document.id(el).getPosition(this.element), function(value, axis){
			return axes.contains(axis) ? value + scroll[axis] : false;
		});
		return this.start.apply(this, this.calculateScroll(position.x, position.y));
	}
});

var Embed = new Class({
	Implements: [Events],
	initialize: function(wrapper, codeWrapper, data){

		this.wrapper = document.id(wrapper);
		this.codeWrapper = document.id(codeWrapper);
		this.data = data;
		this.codeScroll = new Fx.Scroll(this.codeWrapper, {link: 'cancel'});
		this.files = [];
		this.rawTree = [];
		for (var i = 0; i < data.tree.length; i++) {
			var file = {};
			file.path = this.getPath(this.data.tree[i].path);
			file.mode = this.data.tree[i].mode;
			file.sha = this.data.tree[i].sha;
			file.url = this.data.tree[i].url;
			file.name = file.path.pop();
			file.extension = file.name.split('.').pop();
			file.type = (this.data.tree[i].type == "tree")? 'folder' : 'file';
			this.rawTree.push(file);
		}
		this.filelist = new GHE_Filelist(this.wrapper);
		//loop through files, and make structure.
		for (var i = 0; i < this.rawTree.length; i++) {
			var file = this.rawTree[i];
			var path = this.filelist;
			//find/create file path
			while(file.path.length > 0){
				var segment = file.path.shift();
				if(!path[segment]){
					path[segment] =  new GHE_Folder(path.fileHousing, file, segment);
				}
				path = path[segment];
			}
			if(file.type == 'file'){
				if(file.extension != 'gitignore' && file.extension != 'pdf'){
					path[file.name] = new GHE_File(path.fileHousing,file);
					path[file.name].addEvent('clicked', this.fileClicked.bind(this));
					this.files.push(path[file.name]);
				}
			}else{
				path[file.name] = new GHE_Folder(path.fileHousing,file);
			}
		}
		this.files[0].select();
		console.log(this.fileList);
	},
	fileClicked: function(file){
		for (var i = 0; i < this.files.length; i++) {
			this.files[i].unselect();
		}
		file.select();
		console.log(file);
		this.codeScroll.toElement(document.id(file.sha));
	},
	getPath: function(path){
		return path.split("/");
	}
});var GHE_Filelist = new Class({
	Implements: [Events],
	initialize: function(wrapper){
		this.wrapper = document.id(wrapper);
		
		this.buildUI();
	},
	buildUI: function(){
		this.body = new Element('div', {'class': 'fileList'}).inject(this.wrapper);
			this.fileHousing = new Element('div', {'class': 'fileHousing'}).inject(this.body);
		//console.log(this);
	},
});
var GHE_File = new Class({
	Implements: [Events],
	initialize: function(wrapper, data){
		this.data = data;
		this.name = data.name;
		this.sha = data.sha;
		this.url = data.url;
		this.mode = data.mode;
		this.wrapper = document.id(wrapper);
		this.buildUI();
	},
	buildUI: function(){
		this.body = new Element('div', {'class': 'file'}).inject(this.wrapper);
			this.nameEl = new Element('div', {'class': 'name', html: this.data.name}).inject(this.body);
		this.body.addEvent('click', this.clicked.bind(this));
	},
	clicked: function(){
		this.fireEvent('clicked', this);
	},
	select: function(){
		this.body.addClass('selected');
	},
	unselect: function(){
		this.body.removeClass('selected');
	}
});var GHE_Folder = new Class({
	Implements: [Events],
	initialize: function(wrapper, data, name){
		this.data = data;
		this.name = name;
		this.sha = data.sha;
		this.url = data.url;
		this.mode = data.mode;
		this.wrapper = document.id(wrapper);
		
		this.buildUI();
	},
	buildUI: function(){
		this.folderWrapper = new Element('div', {'class': 'folderWrapper'}).inject(this.wrapper);
			this.body = new Element('div', {'class': 'folder'}).inject(this.folderWrapper);
				this.nameEl = new Element('div', {'class': 'name', html: this.name}).inject(this.body);
			this.fileHousing = new Element('div', {'class': 'fileHousing'}).inject(this.folderWrapper);
		this.body.addEvent('click', this.clicked.bind(this));
	},
	clicked: function(){
		this.fireEvent('clicked', this);
	},
	addFile: function(file){
		this.fileHousing.inject(file.body);
	}
});
document.write('<div class=\"githubEmbed_projectWrapper\"><div class=\"projectHeader\" ><span class=\"projectTitle\"><a title=\"github.com: ameyer/ADJD-S311\" href=\"http://github.com/ameyer/ADJD-S311\">ADJD-S311</a> </span><a class=\"downloadButton\" title=\"download prject from github\" href=\"https://github.com/ameyer/ADJD-S311/archive/master.zip\">download</a></div><div class=\"body\"><div class=\"sideBar\" id=\"ADJD-S311_sidebar\"></div><div class=\"projectCode\" id=\"ADJD-S311_code\">   <div class=\"fileWrapper cpp\" id=\"7661157f4cb22546fe5182f71d5e8efb77b05ff5\">  <p class=\"fileHead\">ADJDS311.cpp</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br />161<br />162<br />163<br />164<br />165<br />166<br />167<br />168<br />169<br />170<br />171<br />172<br />173<br />174<br />175<br />176<br />177<br />178<br />179<br />180<br />181<br />182<br />183<br />184<br />185<br />186<br />187<br />188<br />189<br />190<br />191<br />192<br />193<br />194<br />195<br />196<br />197<br />198<br />199<br />200<br />201<br />202<br />203<br />204<br />205<br />206<br />207<br />208<br />209<br />210<br />211<br />212<br />213<br />214<br />215<br />216<br />217<br />218<br />219<br />220<br />221<br />222<br />223<br />224<br />225<br />226<br />227<br />228<br />229<br />230<br />231<br />232<br />233<br />234<br />235<br />236<br />237<br />238<br />239<br />240<br />241<br />242<br />243<br />244<br />245<br />246<br />247<br />248<br />249<br />250<br />251<br />252<br />253<br />254<br />255<br />256<br />257<br />258<br />259<br />260<br />261<br />262<br />263<br />264<br />265<br />266<br />267<br />268<br />269<br />270<br />271<br />272<br />273<br />274<br />275<br />276<br />277<br />278<br />279<br />280<br />281<br />282<br />283<br />284<br />285<br />286<br />287<br />288<br />289<br />290<br />291<br />292<br />293<br />294<br />295<br />296<br />297<br />298<br />299<br />300<br />301<br />302<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code><span class=\"co2\">#include &lt;Arduino.h&gt;</span><br /><span class=\"co2\">#include &lt;ADJDS311.h&gt;</span><br /><br />ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">ADJDS311</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> led_pin<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    _led_pin <span class=\"sy0\">=</span> led_pin<span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><br /><br /><span class=\"kw4\">void</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">calibrate</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    delay<span class=\"br0\">&#40;</span>2<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//wait for LED to come full brintness if used</span><br />    calibrateColor<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// This calibrates R, G, and B int registers</span><br />    calibrateClear<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// This calibrates the C int registers</span><br />    calibrateCapacitors<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// This calibrates the RGB, and C cap registers</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">ledOn</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    digitalWrite<span class=\"br0\">&#40;</span>_led_pin<span class=\"sy0\">,</span> HIGH<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">ledOff</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    digitalWrite<span class=\"br0\">&#40;</span>_led_pin<span class=\"sy0\">,</span> LOW<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><br /><span class=\"kw4\">void</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">init</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    Serial.<span class=\"me1\">begin</span><span class=\"br0\">&#40;</span>9600<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    Serial.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot;init&quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    pinMode<span class=\"br0\">&#40;</span>_led_pin<span class=\"sy0\">,</span> OUTPUT<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// Set the sensor\'s LED as output</span><br />    <br />    Wire.<span class=\"me1\">begin</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    delay<span class=\"br0\">&#40;</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// Wait for ADJD reset sequence</span><br />    <br />    <br />    colorCap<span class=\"br0\">&#91;</span>0<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu0\">9</span><span class=\"sy0\">;</span><br />    colorCap<span class=\"br0\">&#91;</span>1<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu0\">9</span><span class=\"sy0\">;</span><br />    colorCap<span class=\"br0\">&#91;</span>2<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu0\">2</span><span class=\"sy0\">;</span><br />    colorCap<span class=\"br0\">&#91;</span>3<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu0\">5</span><span class=\"sy0\">;</span><br />    <span class=\"co1\">// values must be between 0 and 15</span><br />    <br />    <br />    colorInt<span class=\"br0\">&#91;</span>0<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu0\">2048</span><span class=\"sy0\">;</span><br />    colorInt<span class=\"br0\">&#91;</span>1<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu0\">2048</span><span class=\"sy0\">;</span><br />    colorInt<span class=\"br0\">&#91;</span>2<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu0\">2048</span><span class=\"sy0\">;</span><br />    colorInt<span class=\"br0\">&#91;</span>3<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"nu0\">2048</span><span class=\"sy0\">;</span><br />    <span class=\"co1\">// max value for these is 4095</span><br /><br />    <br />    <span class=\"co1\">// sensor gain registers, CAP_... to select number of capacitors.</span><br />    <span class=\"co1\">// value must be &lt;= 15 */</span><br />    writeRegister<span class=\"br0\">&#40;</span>colorCap<span class=\"br0\">&#91;</span>RED<span class=\"br0\">&#93;</span> <span class=\"sy0\">&amp;</span> 0xF<span class=\"sy0\">,</span> CAP_RED<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span>colorCap<span class=\"br0\">&#91;</span>GREEN<span class=\"br0\">&#93;</span> <span class=\"sy0\">&amp;</span> 0xF<span class=\"sy0\">,</span> CAP_GREEN<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span>colorCap<span class=\"br0\">&#91;</span>BLUE<span class=\"br0\">&#93;</span> <span class=\"sy0\">&amp;</span> 0xF<span class=\"sy0\">,</span> CAP_BLUE<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span>colorCap<span class=\"br0\">&#91;</span>CLEAR<span class=\"br0\">&#93;</span> <span class=\"sy0\">&amp;</span> 0xF<span class=\"sy0\">,</span> CAP_CLEAR<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    <span class=\"co1\">//Write sensor gain registers INT_...</span><br />    <span class=\"co1\">//to select integration time value must be &lt;= 4096</span><br />    writeRegister<span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span><span class=\"br0\">&#41;</span>colorInt<span class=\"br0\">&#91;</span>RED<span class=\"br0\">&#93;</span><span class=\"sy0\">,</span> INT_RED_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>colorInt<span class=\"br0\">&#91;</span>RED<span class=\"br0\">&#93;</span> <span class=\"sy0\">&amp;</span> 0x1FFF<span class=\"br0\">&#41;</span> <span class=\"sy0\">&gt;&gt;</span> 8<span class=\"br0\">&#41;</span><span class=\"sy0\">,</span> INT_RED_HI<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span><span class=\"br0\">&#41;</span>colorInt<span class=\"br0\">&#91;</span>BLUE<span class=\"br0\">&#93;</span><span class=\"sy0\">,</span> INT_BLUE_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>colorInt<span class=\"br0\">&#91;</span>BLUE<span class=\"br0\">&#93;</span> <span class=\"sy0\">&amp;</span> 0x1FFF<span class=\"br0\">&#41;</span> <span class=\"sy0\">&gt;&gt;</span> 8<span class=\"br0\">&#41;</span><span class=\"sy0\">,</span> INT_BLUE_HI<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span><span class=\"br0\">&#41;</span>colorInt<span class=\"br0\">&#91;</span>GREEN<span class=\"br0\">&#93;</span><span class=\"sy0\">,</span> INT_GREEN_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>colorInt<span class=\"br0\">&#91;</span>GREEN<span class=\"br0\">&#93;</span> <span class=\"sy0\">&amp;</span> 0x1FFF<span class=\"br0\">&#41;</span> <span class=\"sy0\">&gt;&gt;</span> 8<span class=\"br0\">&#41;</span><span class=\"sy0\">,</span> INT_GREEN_HI<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span><span class=\"br0\">&#41;</span>colorInt<span class=\"br0\">&#91;</span>CLEAR<span class=\"br0\">&#93;</span><span class=\"sy0\">,</span> INT_CLEAR_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    writeRegister<span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>colorInt<span class=\"br0\">&#91;</span>CLEAR<span class=\"br0\">&#93;</span> <span class=\"sy0\">&amp;</span> 0x1FFF<span class=\"br0\">&#41;</span> <span class=\"sy0\">&gt;&gt;</span> 8<span class=\"br0\">&#41;</span><span class=\"sy0\">,</span> INT_CLEAR_HI<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"coMULTI\">/* calibrateClear() - This function calibrates the clear integration registers<br />of the ADJD-S311.<br />*/</span><br /><span class=\"kw4\">int</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">calibrateClear</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    <span class=\"kw4\">int</span> gainFound <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> upperBox<span class=\"sy0\">=</span><span class=\"nu0\">4096</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> lowerBox <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> half<span class=\"sy0\">;</span><br />    <br />    <span class=\"kw1\">while</span> <span class=\"br0\">&#40;</span><span class=\"sy0\">!</span>gainFound<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />        half <span class=\"sy0\">=</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>upperBox<span class=\"sy0\">-</span>lowerBox<span class=\"br0\">&#41;</span><span class=\"sy0\">/</span>2<span class=\"br0\">&#41;</span><span class=\"sy0\">+</span>lowerBox<span class=\"sy0\">;</span><br />        <span class=\"co1\">//no further halfing possbile</span><br />        <br />        <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>half<span class=\"sy0\">==</span>lowerBox<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />            gainFound<span class=\"sy0\">=</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br />        <span class=\"br0\">&#125;</span><span class=\"kw1\">else</span><span class=\"br0\">&#123;</span><br />            writeInt<span class=\"br0\">&#40;</span>INT_CLEAR_LO<span class=\"sy0\">,</span> half<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />            performMeasurement<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />            <span class=\"kw4\">int</span> halfValue <span class=\"sy0\">=</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_CLEAR_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />        <br />            <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>halfValue<span class=\"sy0\">&gt;</span>1000<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />                upperBox<span class=\"sy0\">=</span>half<span class=\"sy0\">;</span><br />            <span class=\"br0\">&#125;</span><span class=\"kw1\">else</span> <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>halfValue<span class=\"sy0\">&lt;</span>1000<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />                lowerBox<span class=\"sy0\">=</span>half<span class=\"sy0\">;</span><br />            <span class=\"br0\">&#125;</span><span class=\"kw1\">else</span><span class=\"br0\">&#123;</span><br />                gainFound<span class=\"sy0\">=</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br />            <span class=\"br0\">&#125;</span> <br />        <span class=\"br0\">&#125;</span><br />    <span class=\"br0\">&#125;</span><br />    <span class=\"kw1\">return</span> half<span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"coMULTI\">/* calibrateColor() - This function clalibrates the RG and B <br />integration registers.<br />*/</span><br /><span class=\"kw4\">int</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">calibrateColor</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> <span class=\"kw4\">int</span> gainFound <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br /> <span class=\"kw4\">int</span> upperBox<span class=\"sy0\">=</span><span class=\"nu0\">4096</span><span class=\"sy0\">;</span><br /> <span class=\"kw4\">int</span> lowerBox <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br /> <span class=\"kw4\">int</span> half<span class=\"sy0\">;</span><br /> <br /> <span class=\"kw1\">while</span> <span class=\"br0\">&#40;</span><span class=\"sy0\">!</span>gainFound<span class=\"br0\">&#41;</span><br /> <span class=\"br0\">&#123;</span><br />  half <span class=\"sy0\">=</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>upperBox<span class=\"sy0\">-</span>lowerBox<span class=\"br0\">&#41;</span><span class=\"sy0\">/</span>2<span class=\"br0\">&#41;</span><span class=\"sy0\">+</span>lowerBox<span class=\"sy0\">;</span><br />  <span class=\"co1\">//no further halfing possbile</span><br />  <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>half<span class=\"sy0\">==</span>lowerBox<span class=\"br0\">&#41;</span><br />  <span class=\"br0\">&#123;</span><br />   gainFound<span class=\"sy0\">=</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br />  <span class=\"br0\">&#125;</span><br />  <span class=\"kw1\">else</span> <span class=\"br0\">&#123;</span><br />   writeInt<span class=\"br0\">&#40;</span>INT_RED_LO<span class=\"sy0\">,</span> half<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />   writeInt<span class=\"br0\">&#40;</span>INT_GREEN_LO<span class=\"sy0\">,</span> half<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />   writeInt<span class=\"br0\">&#40;</span>INT_BLUE_LO<span class=\"sy0\">,</span> half<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br />   performMeasurement<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />   <span class=\"kw4\">int</span> halfValue <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br /><br />   halfValue<span class=\"sy0\">=</span>max<span class=\"br0\">&#40;</span>halfValue<span class=\"sy0\">,</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_RED_LO<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />   halfValue<span class=\"sy0\">=</span>max<span class=\"br0\">&#40;</span>halfValue<span class=\"sy0\">,</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_GREEN_LO<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />   halfValue<span class=\"sy0\">=</span>max<span class=\"br0\">&#40;</span>halfValue<span class=\"sy0\">,</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_BLUE_LO<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br />   <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>halfValue<span class=\"sy0\">&gt;</span>1000<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    upperBox<span class=\"sy0\">=</span>half<span class=\"sy0\">;</span><br />   <span class=\"br0\">&#125;</span><br />   <span class=\"kw1\">else</span> <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>halfValue<span class=\"sy0\">&lt;</span>1000<span class=\"br0\">&#41;</span> <span class=\"br0\">&#123;</span><br />    lowerBox<span class=\"sy0\">=</span>half<span class=\"sy0\">;</span><br />   <span class=\"br0\">&#125;</span><br />   <span class=\"kw1\">else</span> <span class=\"br0\">&#123;</span><br />    gainFound<span class=\"sy0\">=</span><span class=\"nu0\">1</span><span class=\"sy0\">;</span><br />   <span class=\"br0\">&#125;</span><br />  <span class=\"br0\">&#125;</span><br /> <span class=\"br0\">&#125;</span><br /> <span class=\"kw1\">return</span> half<span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"coMULTI\">/* calibrateCapacitors() - This function calibrates each of the RGB and C<br />capacitor registers.<br />*/</span><br /><span class=\"kw4\">void</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">calibrateCapacitors</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> <span class=\"kw4\">int</span> calibrationRed <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br /> <span class=\"kw4\">int</span> calibrationBlue <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br /> <span class=\"kw4\">int</span> calibrationGreen <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br /> <span class=\"kw4\">int</span> calibrated <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br /><br /> <span class=\"co1\">//need to store detect better calibration</span><br /> <span class=\"kw4\">int</span> oldDiff <span class=\"sy0\">=</span> <span class=\"nu0\">5000</span><span class=\"sy0\">;</span><br /><br /> <span class=\"kw1\">while</span> <span class=\"br0\">&#40;</span><span class=\"sy0\">!</span>calibrated<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />  <span class=\"co1\">// sensor gain setting (Avago app note 5330)</span><br />  <span class=\"co1\">// CAPs are 4bit (higher value will result in lower output)</span><br />  writeRegister<span class=\"br0\">&#40;</span>calibrationRed<span class=\"sy0\">,</span> CAP_RED<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  writeRegister<span class=\"br0\">&#40;</span>calibrationGreen<span class=\"sy0\">,</span> CAP_GREEN<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  writeRegister<span class=\"br0\">&#40;</span>calibrationBlue<span class=\"sy0\">,</span> CAP_BLUE<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br />  <span class=\"co1\">// int colorGain = _calibrateColorGain();</span><br />  <span class=\"kw4\">int</span> colorGain <span class=\"sy0\">=</span> readRegisterInt<span class=\"br0\">&#40;</span>INT_RED_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  writeInt<span class=\"br0\">&#40;</span>INT_RED_LO<span class=\"sy0\">,</span> colorGain<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  writeInt<span class=\"br0\">&#40;</span>INT_GREEN_LO<span class=\"sy0\">,</span> colorGain<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  writeInt<span class=\"br0\">&#40;</span>INT_BLUE_LO<span class=\"sy0\">,</span> colorGain<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br />  <span class=\"kw4\">int</span> maxRead <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">int</span> minRead <span class=\"sy0\">=</span> <span class=\"nu0\">4096</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">int</span> red  <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">int</span> green <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">int</span> blue <span class=\"sy0\">=</span> <span class=\"nu0\">0</span><span class=\"sy0\">;</span><br />  <br />  <span class=\"kw1\">for</span> <span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> i<span class=\"sy0\">=</span><span class=\"nu0\">0</span><span class=\"sy0\">;</span> i<span class=\"sy0\">&lt;</span>4 <span class=\"sy0\">;</span>i <span class=\"sy0\">++</span><span class=\"br0\">&#41;</span><br />  <span class=\"br0\">&#123;</span><br />   performMeasurement<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />   red  <span class=\"sy0\">+=</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_RED_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />   green <span class=\"sy0\">+=</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_GREEN_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />   blue <span class=\"sy0\">+=</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_BLUE_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"br0\">&#125;</span><br />  red  <span class=\"sy0\">/=</span> <span class=\"nu0\">4</span><span class=\"sy0\">;</span><br />  green <span class=\"sy0\">/=</span> <span class=\"nu0\">4</span><span class=\"sy0\">;</span><br />  blue <span class=\"sy0\">/=</span> <span class=\"nu0\">4</span><span class=\"sy0\">;</span><br /><br />  maxRead <span class=\"sy0\">=</span> max<span class=\"br0\">&#40;</span>maxRead<span class=\"sy0\">,</span> red<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  maxRead <span class=\"sy0\">=</span> max<span class=\"br0\">&#40;</span>maxRead<span class=\"sy0\">,</span> green<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  maxRead <span class=\"sy0\">=</span> max<span class=\"br0\">&#40;</span>maxRead<span class=\"sy0\">,</span> blue<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br />  minRead <span class=\"sy0\">=</span> min<span class=\"br0\">&#40;</span>minRead<span class=\"sy0\">,</span> red<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  minRead <span class=\"sy0\">=</span> min<span class=\"br0\">&#40;</span>minRead<span class=\"sy0\">,</span> green<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  minRead <span class=\"sy0\">=</span> min<span class=\"br0\">&#40;</span>minRead<span class=\"sy0\">,</span> blue<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br />  <span class=\"kw4\">int</span> diff <span class=\"sy0\">=</span> maxRead <span class=\"sy0\">-</span> minRead<span class=\"sy0\">;</span><br /><br />  <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>oldDiff <span class=\"sy0\">!=</span> diff<span class=\"br0\">&#41;</span><br />  <span class=\"br0\">&#123;</span><br />   <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>maxRead<span class=\"sy0\">==</span>red<span class=\"br0\">&#41;</span> <span class=\"sy0\">&amp;&amp;</span> <span class=\"br0\">&#40;</span>calibrationRed<span class=\"sy0\">&lt;</span>15<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><br />    calibrationRed<span class=\"sy0\">++;</span><br />   <span class=\"kw1\">else</span> <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>maxRead <span class=\"sy0\">==</span> green<span class=\"br0\">&#41;</span> <span class=\"sy0\">&amp;&amp;</span> <span class=\"br0\">&#40;</span>calibrationGreen<span class=\"sy0\">&lt;</span>15<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><br />    calibrationGreen<span class=\"sy0\">++;</span><br />   <span class=\"kw1\">else</span> <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span><span class=\"br0\">&#40;</span>maxRead <span class=\"sy0\">==</span> blue<span class=\"br0\">&#41;</span> <span class=\"sy0\">&amp;&amp;</span> <span class=\"br0\">&#40;</span>calibrationBlue<span class=\"sy0\">&lt;</span>15<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><br />    calibrationBlue<span class=\"sy0\">++;</span><br />  <span class=\"br0\">&#125;</span><br />  <span class=\"kw1\">else</span><br />   calibrated <span class=\"sy0\">=</span> <span class=\"nu0\">1</span><span class=\"sy0\">;</span><br />   <br />  oldDiff<span class=\"sy0\">=</span>diff<span class=\"sy0\">;</span><br /><br />  <span class=\"kw4\">int</span> rCal <span class=\"sy0\">=</span> calibrationRed<span class=\"sy0\">;</span><br />  <span class=\"kw4\">int</span> gCal <span class=\"sy0\">=</span> calibrationGreen<span class=\"sy0\">;</span><br />  <span class=\"kw4\">int</span> bCal <span class=\"sy0\">=</span> calibrationBlue<span class=\"sy0\">;</span><br /> <span class=\"br0\">&#125;</span><br /> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"coMULTI\">/* writeInt() - This function writes a 12-bit value<br />to the LO and HI integration registers */</span><br /><span class=\"kw4\">void</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">writeInt</span><span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> address<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> gain<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> <span class=\"kw1\">if</span> <span class=\"br0\">&#40;</span>gain <span class=\"sy0\">&lt;</span> 4096<span class=\"br0\">&#41;</span> <br /> <span class=\"br0\">&#123;</span><br />  byte msb <span class=\"sy0\">=</span> gain <span class=\"sy0\">&gt;&gt;</span> <span class=\"nu0\">8</span><span class=\"sy0\">;</span><br />  byte lsb <span class=\"sy0\">=</span> gain<span class=\"sy0\">;</span><br /><br />  writeRegister<span class=\"br0\">&#40;</span>lsb<span class=\"sy0\">,</span> address<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  writeRegister<span class=\"br0\">&#40;</span>msb<span class=\"sy0\">,</span> address<span class=\"sy0\">+</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <span class=\"br0\">&#125;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"coMULTI\">/* performMeasurement() - This must be called before<br />reading any of the data registers. This commands the<br />ADJD-S311 to perform a measurement, and store the data<br />into the data registers.*/</span><br /><span class=\"kw4\">void</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">performMeasurement</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span> <br /> writeRegister<span class=\"br0\">&#40;</span>0x01<span class=\"sy0\">,</span> 0x00<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// start sensing</span><br /> <span class=\"kw1\">while</span><span class=\"br0\">&#40;</span>readRegister<span class=\"br0\">&#40;</span>0x00<span class=\"br0\">&#41;</span> <span class=\"sy0\">!=</span> 0<span class=\"br0\">&#41;</span><br />  <span class=\"sy0\">;</span> <span class=\"co1\">// waiting for a result</span><br /><span class=\"br0\">&#125;</span><br /><br /><br /><br />RGBC ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">read</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br />    <span class=\"co1\">//Read data registers and return a RGBC var</span><br />    RGBC color <span class=\"sy0\">=</span> RGBC<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    performMeasurement<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    color.<span class=\"me1\">red</span> <span class=\"sy0\">=</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_RED_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    color.<span class=\"me1\">green</span> <span class=\"sy0\">=</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_GREEN_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    color.<span class=\"me1\">blue</span> <span class=\"sy0\">=</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_BLUE_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    color.<span class=\"me1\">clear</span> <span class=\"sy0\">=</span> readRegisterInt<span class=\"br0\">&#40;</span>DATA_CLEAR_LO<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    <span class=\"kw1\">return</span> color<span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"coMULTI\">/* getOffset() - This function performs the offset reading<br />and stores the offset data into the colorOffset[] array.<br />You can turn on data trimming by uncommenting out the <br />writing 0x01 to 0x01 code.<br />*/</span><br /><span class=\"kw4\">void</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">getOffset</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> digitalWrite<span class=\"br0\">&#40;</span>_led_pin<span class=\"sy0\">,</span> LOW<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// turn LED off</span><br /> delay<span class=\"br0\">&#40;</span>10<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// wait a tic</span><br /> writeRegister<span class=\"br0\">&#40;</span>0x02<span class=\"sy0\">,</span> 0x00<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// start sensing</span><br /> <span class=\"kw1\">while</span><span class=\"br0\">&#40;</span>readRegister<span class=\"br0\">&#40;</span>0x00<span class=\"br0\">&#41;</span> <span class=\"sy0\">!=</span> 0<span class=\"br0\">&#41;</span><br />  <span class=\"sy0\">;</span> <span class=\"co1\">// waiting for a result</span><br /> <span class=\"co1\">//writeRegister(0x01, 0x01); // set trim</span><br /> <span class=\"co1\">//delay(100);</span><br /> <span class=\"kw1\">for</span> <span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> i<span class=\"sy0\">=</span><span class=\"nu0\">0</span><span class=\"sy0\">;</span> i<span class=\"sy0\">&lt;</span><span class=\"nu0\">4</span><span class=\"sy0\">;</span> i<span class=\"sy0\">++</span><span class=\"br0\">&#41;</span><br />  colorOffset<span class=\"br0\">&#91;</span>i<span class=\"br0\">&#93;</span> <span class=\"sy0\">=</span> <span class=\"br0\">&#40;</span><span class=\"kw4\">signed</span> <span class=\"kw4\">char</span><span class=\"br0\">&#41;</span> readRegister<span class=\"br0\">&#40;</span>OFFSET_RED<span class=\"sy0\">+</span>i<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> digitalWrite<span class=\"br0\">&#40;</span>_led_pin<span class=\"sy0\">,</span> HIGH<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Write a byte of data to a specific ADJD-S311 address</span><br /><span class=\"kw4\">void</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">writeRegister</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> data<span class=\"sy0\">,</span> <span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> address<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> Wire.<span class=\"me1\">beginTransmission</span><span class=\"br0\">&#40;</span>ADJD_S311_ADDRESS<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> Wire.<span class=\"me1\">write</span><span class=\"br0\">&#40;</span>address<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> Wire.<span class=\"me1\">write</span><span class=\"br0\">&#40;</span>data<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> Wire.<span class=\"me1\">endTransmission</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// read a byte of data from ADJD-S311 address</span><br /><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">readRegister</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> address<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> <span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> data<span class=\"sy0\">;</span><br /> <br /> Wire.<span class=\"me1\">beginTransmission</span><span class=\"br0\">&#40;</span>ADJD_S311_ADDRESS<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> Wire.<span class=\"me1\">write</span><span class=\"br0\">&#40;</span>address<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> Wire.<span class=\"me1\">endTransmission</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <br /> Wire.<span class=\"me1\">requestFrom</span><span class=\"br0\">&#40;</span>ADJD_S311_ADDRESS<span class=\"sy0\">,</span> 1<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <span class=\"kw1\">while</span> <span class=\"br0\">&#40;</span><span class=\"sy0\">!</span>Wire.<span class=\"me1\">available</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><br />  <span class=\"sy0\">;</span> <span class=\"co1\">// wait till we can get data</span><br /> <br /> <span class=\"kw1\">return</span> Wire.<span class=\"me1\">read</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"co1\">// Write two bytes of data to ADJD-S311 address and addres+1</span><br /><span class=\"kw4\">int</span> ADJDS311<span class=\"sy0\">::</span><span class=\"me2\">readRegisterInt</span><span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> address<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> <span class=\"kw1\">return</span> readRegister<span class=\"br0\">&#40;</span>address<span class=\"br0\">&#41;</span> <span class=\"sy0\">+</span> <span class=\"br0\">&#40;</span>readRegister<span class=\"br0\">&#40;</span>address<span class=\"sy0\">+</span>1<span class=\"br0\">&#41;</span><span class=\"sy0\">&lt;&lt;</span>8<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /></code></pre>  </div>  </div>  </div>      <div class=\"fileWrapper h\" id=\"fed4a801c53fb80b9f96937045572f3d7f5bce82\">  <p class=\"fileHead\">ADJDS311.h</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code><span class=\"co2\">#ifndef ADJDS311_h</span><br /><span class=\"co2\">#define ADJDS311_h</span><br /><br /><span class=\"co2\">#include &lt;Arduino.h&gt;</span><br /><span class=\"co2\">#include &lt;Wire.h&gt;</span><br /><br /><span class=\"co1\">// ADJD-S311\'s I2C address, don\'t change</span><br /><span class=\"co2\">#define ADJD_S311_ADDRESS 0x74</span><br /><br /><span class=\"co2\">#define RED 0</span><br /><span class=\"co2\">#define GREEN 1</span><br /><span class=\"co2\">#define BLUE 2</span><br /><span class=\"co2\">#define CLEAR 3</span><br /><br /><span class=\"co1\">// ADJD-S311\'s register list</span><br /><span class=\"co2\">#define CTRL 0x00</span><br /><span class=\"co2\">#define CONFIG 0x01</span><br /><span class=\"co2\">#define CAP_RED 0x06</span><br /><span class=\"co2\">#define CAP_GREEN 0x07</span><br /><span class=\"co2\">#define CAP_BLUE 0x08</span><br /><span class=\"co2\">#define CAP_CLEAR 0x09</span><br /><span class=\"co2\">#define INT_RED_LO 0xA</span><br /><span class=\"co2\">#define INT_RED_HI 0xB</span><br /><span class=\"co2\">#define INT_GREEN_LO 0xC</span><br /><span class=\"co2\">#define INT_GREEN_HI 0xD</span><br /><span class=\"co2\">#define INT_BLUE_LO 0xE</span><br /><span class=\"co2\">#define INT_BLUE_HI 0xF</span><br /><span class=\"co2\">#define INT_CLEAR_LO 0x10</span><br /><span class=\"co2\">#define INT_CLEAR_HI 0x11</span><br /><span class=\"co2\">#define DATA_RED_LO 0x40</span><br /><span class=\"co2\">#define DATA_RED_HI 0x41</span><br /><span class=\"co2\">#define DATA_GREEN_LO 0x42</span><br /><span class=\"co2\">#define DATA_GREEN_HI 0x43</span><br /><span class=\"co2\">#define DATA_BLUE_LO 0x44</span><br /><span class=\"co2\">#define DATA_BLUE_HI 0x45</span><br /><span class=\"co2\">#define DATA_CLEAR_LO 0x46</span><br /><span class=\"co2\">#define DATA_CLEAR_HI 0x47</span><br /><span class=\"co2\">#define OFFSET_RED 0x48</span><br /><span class=\"co2\">#define OFFSET_GREEN 0x49</span><br /><span class=\"co2\">#define OFFSET_BLUE 0x4A</span><br /><span class=\"co2\">#define OFFSET_CLEAR 0x4B</span><br /><br /><span class=\"kw4\">struct</span> RGBC<span class=\"br0\">&#123;</span><br />    <span class=\"kw4\">int</span> red<span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> blue<span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> green<span class=\"sy0\">;</span><br />    <span class=\"kw4\">int</span> clear<span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><span class=\"sy0\">;</span><br /><br /><br />class ADJDS311<span class=\"br0\">&#123;</span><br /> public<span class=\"sy0\">:</span><br /><br />  ADJDS311<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> led_pin<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">// constructor</span><br />  <span class=\"kw4\">void</span> init<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">void</span> calibrate<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">void</span> ledOn<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">void</span> ledOff<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br />  RGBC read<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <br />private<span class=\"sy0\">:</span><br />    <span class=\"kw4\">int</span> _led_pin<span class=\"sy0\">;</span><br />    <br />    <span class=\"co1\">// initial values for integration time registers</span><br />    <span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> colorCap<span class=\"br0\">&#91;</span>4<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">unsigned</span> <span class=\"kw4\">int</span> colorInt<span class=\"br0\">&#91;</span>4<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span><br />    <span class=\"kw4\">signed</span> <span class=\"kw4\">char</span> colorOffset<span class=\"br0\">&#91;</span>4<span class=\"br0\">&#93;</span><span class=\"sy0\">;</span><br />    <br />    <span class=\"kw4\">void</span> getOffset<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">void</span> writeRegister<span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> data<span class=\"sy0\">,</span> <span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> address<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> readRegister<span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> address<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">int</span> readRegisterInt<span class=\"br0\">&#40;</span><span class=\"kw4\">unsigned</span> <span class=\"kw4\">char</span> address<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />    <br />    <br />    <span class=\"kw4\">int</span> calibrateClear<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">int</span> calibrateColor<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">void</span> calibrateCapacitors<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">void</span> writeInt<span class=\"br0\">&#40;</span><span class=\"kw4\">int</span> address<span class=\"sy0\">,</span> <span class=\"kw4\">int</span> gain<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br />  <span class=\"kw4\">void</span> performMeasurement<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><span class=\"sy0\">;</span><br /><br /><span class=\"co2\">#endif</span><br /></code></pre>  </div>  </div>  </div>      <div class=\"fileWrapper txt\" id=\"44ebbad48d4e640639db4e4abcdf508bc89a3c8d\">  <p class=\"fileHead\">keywords.txt</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code>#######################################################<br /># keywords.txt - keywords file for the ADJDS311 library<br /><br /># Created by Adam Meyer of bildr Jan 28th 2012<br /><br /># Released as MIT license<br /><br />#######################################################<br /><br />#######################################<br /># Datatypes (KEYWORD1)<br />#######################################<br /><br />ADJDS311    KEYWORD1<br /><br />#######################################<br /># Methods and Functions (KEYWORD2)<br />#######################################<br /><br />init  KEYWORD2<br />calibrate    KEYWORD2<br />ledOn  KEYWORD2<br />ledOff KEYWORD2<br />read  KEYWORD2<br /><br />#######################################<br /># Constants (LITERAL1)<br />#######################################</code></pre>  </div>  </div>  </div>      <div class=\"fileWrapper txt\" id=\"b132efea8543fe82d1fd16a19298a9840f395e17\">  <p class=\"fileHead\">License.txt</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code>Copyright (c) 2010 bildr community<br /><br />Permission is hereby granted, free of charge, to any person obtaining a copy<br />of this software and associated documentation files (the &quot;Software&quot;), to deal<br />in the Software without restriction, including without limitation the rights<br />to use, copy, modify, merge, publish, distribute, sublicense, and/or sell<br />copies of the Software, and to permit persons to whom the Software is<br />furnished to do so, subject to the following conditions:<br /><br />The above copyright notice and this permission notice shall be included in<br />all copies or substantial portions of the Software.<br /><br />THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br />IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br />FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE<br />AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br />LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,<br />OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN<br />THE SOFTWARE.</code></pre>  </div>  </div>  </div>      <div class=\"fileWrapper md\" id=\"f54376b350f87b1df1cba0b3a672b71a6dda5386\">  <p class=\"fileHead\">README.md</p>    <div class=\"fileCodeWrapper\">    <div class=\"code\">  <div class=\"markdown\"><h1>ADJDS311 Color Sensor</h1><p>Arduino code for the ADJDS311 Color Sensor</p><p>For complete hookup and tutorial see: <a href=\"http://adam-meyer.com/arduino/adjd-s311\">http://adam-meyer.com/arduino/adjd-s311</a></p><p>The code is provided under the MIT license please use, edit, change, and share. </p><p><em>Before loading the adjd_s311.ino code, or even opening the arduino software, place the ADJDS311 folder in your arduino library.</em></p><h5>ARDUINO LIBRARY LOCATION</h5><ul><li>On your Mac:: In (home directory)/Documents/Arduino/libraries  </li><li>On your PC:: My Documents -&gt; Arduino -&gt; libraries  </li><li>On your Linux box: (home directory)/sketchbook/libraries  </li></ul><p>For all my arduino articles: <a href=\"http://adam-meyer.com/arduino/\">http://adam-meyer.com/arduino/</a></p></div>  </div>  </div>  </div>      <div class=\"fileWrapper ino\" id=\"f1feb6552646e08aa93cb6c5450d1479d38bc235\">  <p class=\"fileHead\">adjd_s311.ino</p>    <div class=\"fileCodeWrapper\">    <div class=\"lineNumbers\">  1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />  </div>  <div class=\"code\">  <pre class=\"code\"><code><span class=\"co2\">#include &lt;ADJDS311.h&gt;</span><br /><span class=\"co2\">#include &lt;Wire.h&gt;</span><br /><br /><span class=\"kw4\">int</span> sensorLed_pin <span class=\"sy0\">=</span> <span class=\"nu0\">2</span><span class=\"sy0\">;</span> <span class=\"co1\">//LED on the ADJDS-311</span><br />ADJDS311 colorSensor<span class=\"br0\">&#40;</span>sensorLed_pin<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><br /><span class=\"co1\">//if using an RGB LED (Needs PWM Pins)</span><br /><span class=\"kw4\">int</span> redPin <span class=\"sy0\">=</span> <span class=\"nu0\">3</span><span class=\"sy0\">;</span><br /><span class=\"kw4\">int</span> greenPin <span class=\"sy0\">=</span> <span class=\"nu0\">5</span><span class=\"sy0\">;</span><br /><span class=\"kw4\">int</span> bluePin <span class=\"sy0\">=</span> <span class=\"nu0\">6</span><span class=\"sy0\">;</span><br /><br /><span class=\"kw4\">void</span> setup<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">begin</span><span class=\"br0\">&#40;</span>9600<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <br /> colorSensor.<span class=\"me1\">init</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> colorSensor.<span class=\"me1\">ledOn</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//turn LED on</span><br /> <br /> <span class=\"co1\">//Calibrate white </span><br /> <span class=\"co1\">//Need to hold white card in front (1-3mm) of it to calibrate from</span><br /> colorSensor.<span class=\"me1\">calibrate</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> loop<span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> RGBC color <span class=\"sy0\">=</span> colorSensor.<span class=\"me1\">read</span><span class=\"br0\">&#40;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//read the color</span><br /> <br /> <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span>color.<span class=\"me1\">red</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot; | &quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span>color.<span class=\"me1\">green</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot; | &quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span>color.<span class=\"me1\">blue</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">print</span><span class=\"br0\">&#40;</span><span class=\"st0\">&quot; | &quot;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=Serial\"><span class=\"kw3\">Serial</span></a>.<span class=\"me1\">println</span><span class=\"br0\">&#40;</span>color.<span class=\"me1\">clear</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <br /> lightLED<span class=\"br0\">&#40;</span>color<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//send color to the LED</span><br /> <br /> <a href=\"geshi/redirect.php?language=arduino&search=delay\"><span class=\"kw3\">delay</span></a><span class=\"br0\">&#40;</span>200<span class=\"br0\">&#41;</span><span class=\"sy0\">;</span> <span class=\"co1\">//just here to slow down the serial output</span><br /> <br /><span class=\"br0\">&#125;</span><br /><br /><span class=\"kw4\">void</span> lightLED<span class=\"br0\">&#40;</span>RGBC color<span class=\"br0\">&#41;</span><span class=\"br0\">&#123;</span><br /> <span class=\"co1\">//RGBC is an array of red/green/blue/clear readings </span><br /> <span class=\"co1\">//Take a RGBC, and try to reproduce it on an RGB LED</span><br /> <span class=\"co1\">//This does not work very well as is because of how colors/our eyes work</span><br /> <br /> <a href=\"geshi/redirect.php?language=arduino&search=analogWrite\"><span class=\"kw3\">analogWrite</span></a><span class=\"br0\">&#40;</span>redPin<span class=\"sy0\">,</span> <a href=\"geshi/redirect.php?language=arduino&search=map\"><span class=\"kw3\">map</span></a><span class=\"br0\">&#40;</span>color.<span class=\"me1\">red</span><span class=\"sy0\">,</span> 0<span class=\"sy0\">,</span> 1024<span class=\"sy0\">,</span> 0<span class=\"sy0\">,</span> 255<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=analogWrite\"><span class=\"kw3\">analogWrite</span></a><span class=\"br0\">&#40;</span>greenPin<span class=\"sy0\">,</span> <a href=\"geshi/redirect.php?language=arduino&search=map\"><span class=\"kw3\">map</span></a><span class=\"br0\">&#40;</span>color.<span class=\"me1\">green</span><span class=\"sy0\">,</span> 0<span class=\"sy0\">,</span> 1024<span class=\"sy0\">,</span> 0<span class=\"sy0\">,</span> 255<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /> <a href=\"geshi/redirect.php?language=arduino&search=analogWrite\"><span class=\"kw3\">analogWrite</span></a><span class=\"br0\">&#40;</span>bluePin<span class=\"sy0\">,</span> <a href=\"geshi/redirect.php?language=arduino&search=map\"><span class=\"kw3\">map</span></a><span class=\"br0\">&#40;</span>color.<span class=\"me1\">blue</span><span class=\"sy0\">,</span> 0<span class=\"sy0\">,</span> 1024<span class=\"sy0\">,</span> 0<span class=\"sy0\">,</span> 255<span class=\"br0\">&#41;</span><span class=\"br0\">&#41;</span><span class=\"sy0\">;</span><br /><span class=\"br0\">&#125;</span><br /></code></pre>  </div>  </div>  </div>    </div></div><div class=\"footer\">powered by <a title=\"github.com\" href=\"http://github.com\">github</a><!-- Served in 0.0052008628845215 sec - loaded from cache: yes - limitLeft:  of  --!></div></div>');
new Embed("ADJD-S311_sidebar", "ADJD-S311_code", {"sha":"ffc1b0bddde5712b8772236bbea3fec4fadd0f2b","url":"https:\/\/api.github.com\/repos\/ameyer\/ADJD-S311\/git\/trees\/ffc1b0bddde5712b8772236bbea3fec4fadd0f2b","tree":[{"path":"ADJDS311\/ADJDS311.cpp","mode":"100755","type":"blob","sha":"7661157f4cb22546fe5182f71d5e8efb77b05ff5","size":7583,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADJD-S311\/git\/blobs\/7661157f4cb22546fe5182f71d5e8efb77b05ff5"},{"path":"ADJDS311\/ADJDS311.h","mode":"100755","type":"blob","sha":"fed4a801c53fb80b9f96937045572f3d7f5bce82","size":1632,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADJD-S311\/git\/blobs\/fed4a801c53fb80b9f96937045572f3d7f5bce82"},{"path":"ADJDS311\/keywords.txt","mode":"100755","type":"blob","sha":"44ebbad48d4e640639db4e4abcdf508bc89a3c8d","size":668,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADJD-S311\/git\/blobs\/44ebbad48d4e640639db4e4abcdf508bc89a3c8d"},{"path":"License.txt","mode":"100755","type":"blob","sha":"b132efea8543fe82d1fd16a19298a9840f395e17","size":1073,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADJD-S311\/git\/blobs\/b132efea8543fe82d1fd16a19298a9840f395e17"},{"path":"README.md","mode":"100644","type":"blob","sha":"f54376b350f87b1df1cba0b3a672b71a6dda5386","size":633,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADJD-S311\/git\/blobs\/f54376b350f87b1df1cba0b3a672b71a6dda5386"},{"path":"adjd_s311.ino","mode":"100755","type":"blob","sha":"f1feb6552646e08aa93cb6c5450d1479d38bc235","size":1193,"url":"https:\/\/api.github.com\/repos\/ameyer\/ADJD-S311\/git\/blobs\/f1feb6552646e08aa93cb6c5450d1479d38bc235"}],"truncated":false})

<!-- Served in 0.0057559013366699 sec - loaded from cache: yes - limitLeft:  of  --!>