<!DOCTYPE html >

<html lang="en">
<head>
<meta charset="utf-8"/>
<link href="style/main.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.0/mootools-yui-compressed.js" type="text/javascript"></script>
<script type="text/javascript">
	
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-4050921-11', 'auto');
	ga('send', 'pageview');
	
	function nospam(user,domain) { window.location = "mailto:" + user + "@" + domain; }
		
		
	window.addEvent('domready', function(){

		$$('.codeHead .copy').addEvent('click', function(event) {
			this.highlight();
			event.stop();
			
			var code = this.getParent('.codesnip-container').getElement('.codesnip');
			
			if (code.select) {
				code.select();
			}else if (document.selection) {
				var range = document.body.createTextRange();
				range.moveToElementText(code);
				range.select();
			} else if (window.getSelection) {
				var range = document.createRange();
				range.selectNode(code);
				window.getSelection().addRange(range);
			}
			
			
			try {
				var successful = document.execCommand('copy');
				var msg = successful ? 'successful' : 'unsuccessful';
				console.log('Copying text command was ' + msg);
			} catch (err) {
				console.log('Oops, unable to copy');
			}
		});
	
	});
	</script>
<!--
	
	Icon Set:	IcoMoon - Free -- http://keyamoon.com/icomoon/
	License:	CC BY-SA 3.0 -- http://creativecommons.org/licenses/by-sa/3.0/
	
	
	Icon Set:	Broccolidry -- http://dribbble.com/shots/587469-Free-16px-Broccolidryiconsaniconsetitisfullof-icons
	License:	Aribitrary -- http://licence.visualidiot.com/
	
	-->
<title>Adam meyer | Arduino</title>
</head>
<body>
<div id="headerWrapper">
<div id="header">
<h1><a href="http://adam-meyer.com">Adam meyer</a></h1>
<h2>Design + Code</h2>
<div id="topNav">
<a href="../about.html" id="aboutLink">About</a>
<a href="../resume.pdf">Resume</a>
<a href="../index.html">Portfolio</a>
<a href="index.html">Arduino Articles</a>
<span id="contactLink"><span onclick="javascript:nospam('sternmeyer','gmail.com');">Contact</span>
<div id="contactLinks">
<a class="icon-twitter" href="http://twitter.com/sternmeyer" title="twitter"></a>
<a class="icon-linkedin" href="http://www.linkedin.com/pub/adam-meyer/20/7a/850/" title="linked in"></a>
<a class="icon-dribbble" href="http://dribbble.com/ameyer" title="dribbble"></a>
<a class="icon-github" href="https://github.com/ameyer" title="github"></a>
<a class="icon-instagram" href="http://instagram.com/sternmeyer" title="instagram"></a>
<a class="icon-envelope2" href="mailto:sternmeyer@gmail.com" title="email"></a>
</div>
</span>
</div>
</div>
</div>
<div id="articleWrapper">
<div class="content">
<div class="post"><h2>Sensing Humidity With The HIH-4030 + Arduino</h2>
<div class="postContent">
<p><img class="noFrame" src="images/2012/11/HIH-4030-arduino.jpg"/></p>
<div class="columnBody">
<div class="leftColumn">
Humidity is weird. Even though we experience it all the time, it's not something we can normally guess with any accuracy. This is probably because when we talk about humidity, we are talking about relative humidity. Relative humidity is relative to temperature, so a change in temperature alone is enough to change the relative humidity. This makes guessing the humidity extremely hard.
<p>Well luckily measuring relative humidity is pretty simple with the HIH-4030. The HIH-4030 is a low-power, analog output sensor.</p>
<h3>Hooking It Up</h3>
<p>Hooking up the HIH-4030 to your arduino is super simple, just power it with 5V / Ground, and connect the out to an analog pin on the arduino. You may be able to run it with 3.3v, I haven't tried it. But if you do, you need to change the "supplyVolt" value in the code from 5.0 to 3.3.</p>
</div>
<div class="rightColumn">
<p><a href="images/2012/11/HIH-4030_arduino_hookup1.png"><img alt="" class="alignleft size-medium wp-image-2335" height="275" src="images/2012/11/HIH-4030_arduino_hookup1-400x275.png" title="HIH-4030_arduino_hookup" width="400"/></a></p>
</div>
</div>
<h3>Code</h3>
<p><strong style="color: #a00">Note that because determining relative humidity requires knowing an accurate temperature, you are going to want to use this in conjunction with a thermometer.</strong> To simplify things for you, the code just has a hard coded temperature that we pass to a function to get the humidity. You will want to replace that value with the value from your thermometer.</p>
<p>Also note that the sensor is sensitive to light, so for best performance, shield it from bright light.</p>
<p>Suggested Thermometers (with article):<br/>
<a href="./tmp102-arduino">TMP102</a><br/>
<a href="./ds18b20-arduino">DS18B20</a></p>
<div class="codesnip-container">
<div class="codeHead">
<a class="copy" href="#">Copy Code</a>
</div>
<pre class="arduino codesnip" style="font-family:monospace;"><span class="co1">//From the bildr article http://bildr.org/2012/11/hih4030-arduino/</span>

<span class="kw4">int</span> HIH4030_Pin <span class="sy0">=</span> A0<span class="sy0">;</span> <span class="co1">//analog pin 0</span>

<span class="kw4">void</span> setup<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
  <span class="kw3">Serial</span>.<span class="me1">begin</span><span class="br0">(</span>9600<span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>

<span class="kw4">void</span> loop<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>

  <span class="co1">//To properly caculate relative humidity, we need the temperature.</span>
  <span class="kw4">float</span> temperature <span class="sy0">=</span> <span class="nu0">25</span><span class="sy0">;</span> <span class="co1">//replace with a thermometer reading if you have it</span>
  <span class="kw4">float</span> relativeHumidity  <span class="sy0">=</span> getHumidity<span class="br0">(</span>temperature<span class="br0">)</span><span class="sy0">;</span>

  <span class="kw3">Serial</span>.<span class="me1">println</span><span class="br0">(</span>relativeHumidity<span class="br0">)</span><span class="sy0">;</span>

  <span class="kw3">delay</span><span class="br0">(</span>100<span class="br0">)</span><span class="sy0">;</span> <span class="co1">//just here to slow it down so you can read it</span>
<span class="br0">}</span>


<span class="kw4">float</span> getHumidity<span class="br0">(</span><span class="kw4">float</span> degreesCelsius<span class="br0">)</span><span class="br0">{</span>
  <span class="co1">//caculate relative humidity</span>
  <span class="kw4">float</span> supplyVolt <span class="sy0">=</span> <span class="nu16">5.0</span><span class="sy0">;</span>

  <span class="co1">// read the value from the sensor:</span>
  <span class="kw4">int</span> HIH4030_Value <span class="sy0">=</span> <span class="kw3">analogRead</span><span class="br0">(</span>HIH4030_Pin<span class="br0">)</span><span class="sy0">;</span>
  <span class="kw4">float</span> voltage <span class="sy0">=</span> HIH4030_Value<span class="sy0">/</span>1023. <span class="sy0">*</span> supplyVolt<span class="sy0">;</span> <span class="co1">// convert to voltage value</span>

  <span class="co1">// convert the voltage to a relative humidity</span>
  <span class="co1">// - the equation is derived from the HIH-4030/31 datasheet</span>
  <span class="co1">// - it is not calibrated to your individual sensor</span>
  <span class="co1">//  Table 2 of the sheet shows the may deviate from this line</span>
  <span class="kw4">float</span> sensorRH <span class="sy0">=</span> 161.0 <span class="sy0">*</span> voltage <span class="sy0">/</span> supplyVolt <span class="sy0">-</span> <span class="nu16">25.8</span><span class="sy0">;</span>
  <span class="kw4">float</span> trueRH <span class="sy0">=</span> sensorRH <span class="sy0">/</span> <span class="br0">(</span>1.0546 <span class="sy0">-</span> 0.0026 <span class="sy0">*</span> degreesCelsius<span class="br0">)</span><span class="sy0">;</span> <span class="co1">//temperature adjustment </span>

  <span class="kw1">return</span> trueRH<span class="sy0">;</span>
<span class="br0">}</span></pre>
<div class="codeFoot">
				Unless otherwise stated, this code is released under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a> - Please use, change and share it.
			</div>
</div>
</div>
<div id="attribution">
<p>Article taken from <a href="http://bildr.org/hih4030-arduino">bildr.org</a> with minor changes - <i>I am the original author of this content</i></p>
<div id="attributionIcons">
<div class="ccIcon cc"></div>
<div class="ccIcon sa"></div>
<div class="ccIcon attribution"></div>
<div id="attributionText">
<a href="https://creativecommons.org/licenses/by-sa/3.0/">Content available under:<br/>Attribution-Share Alike 3.0 Unported</a>
</div>
</div>
</div>
</div></div></div></body></html>