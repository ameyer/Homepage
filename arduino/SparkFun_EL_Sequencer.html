<!DOCTYPE html >

<html lang="en">
<head>
<meta charset="utf-8"/>
<link href="style/main.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.0/mootools-yui-compressed.js" type="text/javascript"></script>
<script type="text/javascript">
	
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-4050921-11', 'auto');
	ga('send', 'pageview');
	
	function nospam(user,domain) { window.location = "mailto:" + user + "@" + domain; }
		
		
	window.addEvent('domready', function(){

		$$('.codeHead .copy').addEvent('click', function(event) {
			this.highlight();
			event.stop();
			
			var code = this.getParent('.codesnip-container').getElement('.codesnip');
			
			if (code.select) {
				code.select();
			}else if (document.selection) {
				var range = document.body.createTextRange();
				range.moveToElementText(code);
				range.select();
			} else if (window.getSelection) {
				var range = document.createRange();
				range.selectNode(code);
				window.getSelection().addRange(range);
			}
			
			
			try {
				var successful = document.execCommand('copy');
				var msg = successful ? 'successful' : 'unsuccessful';
				console.log('Copying text command was ' + msg);
			} catch (err) {
				console.log('Oops, unable to copy');
			}
		});
	
	});
	</script>
<!--
	
	Icon Set:	IcoMoon - Free -- http://keyamoon.com/icomoon/
	License:	CC BY-SA 3.0 -- http://creativecommons.org/licenses/by-sa/3.0/
	
	
	Icon Set:	Broccolidry -- http://dribbble.com/shots/587469-Free-16px-Broccolidryiconsaniconsetitisfullof-icons
	License:	Aribitrary -- http://licence.visualidiot.com/
	
	-->
<title>Adam meyer | Arduino</title>
</head>
<body>
<div id="headerWrapper">
<div id="header">
<h1><a href="http://adam-meyer.com">Adam meyer</a></h1>
<h2>Design + Code</h2>
<div id="topNav">
<a href="../about.html" id="aboutLink">About</a>
<a href="../resume.pdf">Resume</a>
<a href="../index.html">Portfolio</a>
<a href="index.html">Arduino Articles</a>
<span id="contactLink"><span onclick="javascript:nospam('sternmeyer','gmail.com');">Contact</span>
<div id="contactLinks">
<a class="icon-twitter" href="http://twitter.com/sternmeyer" title="twitter"></a>
<a class="icon-linkedin" href="http://www.linkedin.com/pub/adam-meyer/20/7a/850/" title="linked in"></a>
<a class="icon-dribbble" href="http://dribbble.com/ameyer" title="dribbble"></a>
<a class="icon-github" href="https://github.com/ameyer" title="github"></a>
<a class="icon-instagram" href="http://instagram.com/sternmeyer" title="instagram"></a>
<a class="icon-envelope2" href="mailto:sternmeyer@gmail.com" title="email"></a>
</div>
</span>
</div>
</div>
</div>
<div id="articleWrapper">
<div class="content">
<div class="post"><h2>Getting started with your SparkFun EL Sequencer</h2>
<div class="postContent">
<p><img class="noFrame" src="images/2011/05/El-Sequencer.jpg"/></p>
<div class="columnBody">
<div class="leftColumn">
<p>So you bought your self a fancy new <a href="http://www.sparkfun.com/products/9203">EL Sequencer</a> from <a href="http://www.sparkfun.com">SparkFun</a> and your wondering how to use it... Aside from the product page being totally ambiguous, there doesn't seem to be much help out there on how to get started with this - So I thought I would put an end to that.</p>
<h3>About The Board</h3>
<p>You may not know it, but you actually bought yourself a full-blown arduino that can be used to switch EL Strands on and off. Yes, you read that right... The EL Sequencer is an Arduino, and it just has the digital pins connected to TRIACs so you can switch the high-voltage, high-frequency signal that is needed to power the EL Wire. The reason for the embedded microcontroller is so it can be a standalone part and not require anything else to control it. If you are more of a pure AVR/C person, the sequencer can be programmed with your favorite IDE as well, but this article will cover programming it as an arduino.  </p>
<h3>Hooking It Up</h3>
<p>Of all things that complicated the setup for me, this was it. The text on the sequencer is a little ambiguous, but I did some searching, and checked with SparkFun, and this is how it goes. The image on the right assumes you have the <a href="http://www.sparkfun.com/products/10201">3v SparkFun El Inverter</a> - The weirdest part for me was that both sides of the inverter are plugged into the sequencer, but this allows a single battery to power the sequencer and the inverter. And, if you do it like this, the USB/Batt switch can be used as a power switch. Lastly you need a power source. The battery plug can be powered with anyting 3 - 4.2v but works particularly well with the <a href="http://www.sparkfun.com/search/results?term=Polymer+Lithium+Ion+Battery&amp;what=products">3.7V liPoly batteries</a>.</p>
</div>
<div class="rightColumn">
<a href="images/2011/05/EL-Sequencer.png"><img alt="" class="alignright size-medium wp-image-1246" height="500" src="images/2011/05/EL-Sequencer-400x500.png" title="EL-Sequencer" width="400"/></a>
</div>
</div>
<div class="columnBody">
<div class="leftColumn">
<h4>But I have a different inverter!</h4>
<p>Yeah, there are a lot of inverters out there, and most are not double ended like the 3V inverter is. If that is the case with the one you own, have no fear, we just need to do things a little differently. Sadly, this will require 2 power sources, and you will need to switch off the inverter and the sequencer separately, but this will work. To make this work, a wire needs to be soldered between the "power" and the "output" of the EL Driver section as shown on the right (look for the green line).</p>
<p>Even though your inverter is powered and connected to the sequencer, the sequencer still needs power for the arduino part. If you are not using the 3v inverter loop, the battery input on the sequencer can range anywhere from 3-12V.
</p></div>
<div class="rightColumn">
<p><a href="images/2011/05/Other-el-sequencer-inverter.png"><img alt="" class="alignleft size-medium wp-image-1263" height="226" src="images/2011/05/Other-el-sequencer-inverter-400x226.png" title="Other-el-sequencer-inverter" width="400"/></a>
</p></div>
</div>
<div class="columnBody">
<div class="leftColumn">
<h3>Programming The Sequencer</h3>
<p>To program your EL sequencer you need some way to get the code on there. I am using the <a href="http://www.sparkfun.com/products/9873">FTDI basic</a> from SparkFun as shown in this illustration, but you can use an <a href="http://www.sparkfun.com/products/9717">FTDI cable</a> as well. You just need some way to get a USB connection to the board. You will also need to solder some pins onto the right of EL Sequencer where it says USB so you can plug the programmer into it.</p>
<p>Once you have the sequencer connected to your computer via the FTDI basic you are good to go. If you switch the switch on the sequencer to usb, you will see the board power up. In the Arduino IDE you need to select the proper serial port, and under "board" you are going to select "LilyPad Arduino w/ ATmega 328". If you have an older version of the EL sequencer, you will want to select "LilyPad Arduino w/ ATmega 168".</p>
</div>
<div class="rightColumn">
<a href="images/2011/05/el-sequencer-FTDI-Basic.png"><img alt="" class="noFrame" src="images/2011/05/el-sequencer-FTDI-Basic.png" title="el-sequencer-FTDI Basic"/></a>
</div>
</div>
<div class="wideBody">
<h3>Code</h3>
<p>The example he have is dead simple. But I wanted to show you how it was basically just a regular arduino. All it does is blink all the channels. If you want to fade the EL wire you can not simple use analogWrite or PWM - The EL wire acts as a capacitor and prevents it from working well regular PWM.</p>
<p>If you want better contol, and fading, I reccomend using SparkFun's EL_Escudo library, (they figured out the fade). It has blink commands, all_off commands, fading, you name it. <a href="http://www.sparkfun.com/Code/EL_Escudo.zip">You can get that here</a> - Just make sure to place it in your arduino's library folder, and you need to restart the arduino software before you can use it.</p>
<div class="codesnip-container">
<div class="codeHead">
<a class="copy" href="#">Copy Code</a>
</div>
<pre class="arduino codesnip" style="font-family:monospace;"><span class="co2">#define A  2</span>
<span class="co2">#define B  3</span>
<span class="co2">#define C  4</span>
<span class="co2">#define D  5</span>
<span class="co2">#define E  6</span>
<span class="co2">#define F  7</span>
<span class="co2">#define G  8</span>
<span class="co2">#define H  9</span>

<span class="kw4">void</span> setup<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>A<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>B<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>C<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>D<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>E<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>F<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>G<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>H<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>


<span class="kw4">void</span> loop<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
     <span class="kw3">digitalWrite</span><span class="br0">(</span>A<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>B<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>C<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>D<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>E<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>F<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>G<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>H<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span>  

    <span class="kw3">delay</span><span class="br0">(</span>2000<span class="br0">)</span><span class="sy0">;</span>

    <span class="kw3">digitalWrite</span><span class="br0">(</span>A<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>B<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>C<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>D<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>E<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>F<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>G<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span> 
     <span class="kw3">digitalWrite</span><span class="br0">(</span>H<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span>  

     <span class="kw3">delay</span><span class="br0">(</span>500<span class="br0">)</span><span class="sy0">;</span>


<span class="br0">}</span></pre>
<div class="codeFoot">
				Unless otherwise stated, this code is released under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a> - Please use, change and share it.
			</div>
</div>
</div>
<h3>Other</h3>
<p>Just note that the EL wire is 100+V at 4000hz, but very low power. And while you wont feel a shock, if you touch the sequencer in the wrong places, you will tingle. So if you have this in a costume or something, make sure it is properly covered. </p>
<p>Also, if you are looking for a great tutorial on cutting and splicing EL Wire, Lady Ada has you covered in this great <a href="http://www.ladyada.net/learn/el-wire/">article</a>.</p>
<p>Thanks to apothus for this additional info.</p>
</div>
<div id="attribution">
<p>Article taken from <a href="http://bildr.org/el-sequencer">bildr.org</a> with minor changes - <i>I am the original author of this content</i></p>
<div id="attributionIcons">
<div class="ccIcon cc"></div>
<div class="ccIcon sa"></div>
<div class="ccIcon attribution"></div>
<div id="attributionText">
<a href="https://creativecommons.org/licenses/by-sa/3.0/">Content available under:<br/>Attribution-Share Alike 3.0 Unported</a>
</div>
</div>
</div>
</div></div></div></body></html>