<!DOCTYPE html >

<html lang="en">
<head>
<meta charset="utf-8"/>
<link href="style/main.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.0/mootools-yui-compressed.js" type="text/javascript"></script>
<script type="text/javascript">
	
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-4050921-11', 'auto');
	ga('send', 'pageview');
	
	function nospam(user,domain) { window.location = "mailto:" + user + "@" + domain; }
		
		
	window.addEvent('domready', function(){

		$$('.codeHead .copy').addEvent('click', function(event) {
			this.highlight();
			event.stop();
			
			var code = this.getParent('.codesnip-container').getElement('.codesnip');
			
			if (code.select) {
				code.select();
			}else if (document.selection) {
				var range = document.body.createTextRange();
				range.moveToElementText(code);
				range.select();
			} else if (window.getSelection) {
				var range = document.createRange();
				range.selectNode(code);
				window.getSelection().addRange(range);
			}
			
			
			try {
				var successful = document.execCommand('copy');
				var msg = successful ? 'successful' : 'unsuccessful';
				console.log('Copying text command was ' + msg);
			} catch (err) {
				console.log('Oops, unable to copy');
			}
		});
	
	});
	</script>
<!--
	
	Icon Set:	IcoMoon - Free -- http://keyamoon.com/icomoon/
	License:	CC BY-SA 3.0 -- http://creativecommons.org/licenses/by-sa/3.0/
	
	
	Icon Set:	Broccolidry -- http://dribbble.com/shots/587469-Free-16px-Broccolidryiconsaniconsetitisfullof-icons
	License:	Aribitrary -- http://licence.visualidiot.com/
	
	-->
<title>Adam meyer | Arduino</title>
</head>
<body>
<div id="headerWrapper">
<div id="header">
<h1><a href="http://adam-meyer.com">Adam meyer</a></h1>
<h2>Design + Code</h2>
<div id="topNav">
<a href="../about.html" id="aboutLink">About</a>
<a href="../resume.pdf">Resume</a>
<a href="../index.html">Portfolio</a>
<a href="index.html">Arduino Articles</a>
<span id="contactLink"><span onclick="javascript:nospam('sternmeyer','gmail.com');">Contact</span>
<div id="contactLinks">
<a class="icon-twitter" href="http://twitter.com/sternmeyer" title="twitter"></a>
<a class="icon-linkedin" href="http://www.linkedin.com/pub/adam-meyer/20/7a/850/" title="linked in"></a>
<a class="icon-dribbble" href="http://dribbble.com/ameyer" title="dribbble"></a>
<a class="icon-github" href="https://github.com/ameyer" title="github"></a>
<a class="icon-instagram" href="http://instagram.com/sternmeyer" title="instagram"></a>
<a class="icon-envelope2" href="mailto:sternmeyer@gmail.com" title="email"></a>
</div>
</span>
</div>
</div>
</div>
<div id="articleWrapper">
<div class="content">
<div class="post"><h2>Use The EasyDriver Stepper Motor Driver + Arduino</h2>
<div class="postContent">
<p><img class="noFrame" src="images/2011/05/easyDriver.jpg"/></p>
<div class="columnBody">
<div class="leftColumn">
<p>Stepper (or step) motors are really cool. They are perfect for automation or any time you need a motor to turn to a specific point, at a specific speed, in a specific direction. For this article I wont get into why, or how, but unlike typical motors, steppers are able to do all of this, and hold their position when they are not moving - You pay for this by essentially powering them at full power all the time, but you get total control in return.</p>
<p>Steppers are defined in the amount of steps, or degrees that is the minimum turn the motor can make, with 200 steps, or 1.8º motors being the most common. And you can control them relatively easily with your arduino and some Transistors - But today I wanted to do a quick article on hooking up the <a href="http://www.sparkfun.com/products/10267">EasyDriver Stepper Motor Driver</a> sold from sparkfun, the <a href="http://www.sparkfun.com/products/9238">sparkfun sold stepper motor</a>, and your Arduino. I noticed there was a very nice <a href="http://lusorobotica.com/index.php/topic,106.0.html">Portuguese article</a> already on the topic, but it did really describe how you connect the motor or mention speed control.</p>
<p>So... The EasyDriver does something called micro stepping, it breaks down that minimum step into smaller micro steps, in this case 8 micro steps per step. Microstepping allows for smoother more accurate control, but that means that your 200 step stepper, connected to the EasyDriver needs 1600 ( 200 * 8 ) steps to make a full rotation - Just take note when you wonder why telling it to step 200 steps barely rotates the motor.</p>
<p>Because steppers hold their position until you tell them to "step" you can easily control their speed with some great advantages. Unlike a typical motor, steppers actually are stronger when moving slower. And... You don't change the amount of power to the motor to control its speed - In fact, you almost never need to change the amount of power to the motor - So just give it what it needs, and keep it that way.</p>
<h3>Hooking it up</h3>
<p>Only a few things need to connected to use the EasyDriver to use it with your Arduino. You need some 12V source to the EasyDriver (the motor in this article is 12V) - This will be powering the stepper - Im using a 12V adapter - similar to the one in the illustration. Just make sure it is rated at least 750ma - A higher rating is better, and just means it wont burn out. Connect the stepper motor as shown to the EasyDriver - The red/green are one pair, and the blue/yellow are another.  <strong>If your stepper is different,</strong> you can ask us in the forum/discussion area how to find the 2 pairs. Lastly connect the 3 wires from the "gnd", "dir", and "step" of the EasyDriver to the Arduino as shown.</p>
</div>
<div class="rightColumn">
<a href="images/2011/05/EasyDriver-Stepper-Motor-Driver2.png"><img alt="" class="alignright size-medium wp-image-1186" height="722" src="images/2011/05/EasyDriver-Stepper-Motor-Driver2-400x722.png" title="EasyDriver Stepper- Motor -Driver2" width="400"/></a>
</div>
</div>
<div class="wideBody">
<h3>Using the EasyDriver's current regulator</h3>
<p>If you use use a higher voltage adapter than your stepper motor is rated at (this one is 12V) you could be supplying too much current, and could damage the motor. You can dial down the current on the easyDriver using the small dial on the board if needed - it can limit the current from 150ma - 750ma. This particular motor is rated at 300ma maximum. This basically gives you a way to only supply the motor what it needs if you could be supplying too much.</p>
<h3>Code</h3>
<p>I put together some code you can use to control the stepper with your Arduino. I built 2 functions that do the same thing, but one you tell the number of degrees to rotate (negative degrees EG -90 will rotate the oppsite direction) and the other function you tell it the number of micro steps (8 per step) to turn, and again a negative number of steps will make it rotate the other way.</p>
<p>Both functions accept a number between .01 and 1 for speed. .01 is really slow, but strong, and 1 is really fast, but weaker - Anything below .5 seems to be the same strength.</p>
<div class="codesnip-container">
<div class="codeHead">
<a class="copy" href="#">Copy Code</a>
</div>
<pre class="arduino codesnip" style="font-family:monospace;"><span class="co1">//////////////////////////////////////////////////////////////////</span>
<span class="co1">//©2011 bildr</span>
<span class="co1">//Released under the MIT License - Please reuse change and share</span>
<span class="co1">//Using the easy stepper with your arduino</span>
<span class="co1">//use rotate and/or rotateDeg to controll stepper motor</span>
<span class="co1">//speed is any number from .01 -&gt; 1 with 1 being fastest - </span>
<span class="co1">//Slower Speed == Stronger movement</span>
<span class="co1">/////////////////////////////////////////////////////////////////</span>


<span class="co2">#define DIR_PIN 2</span>
<span class="co2">#define STEP_PIN 3</span>

<span class="kw4">void</span> setup<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> 
  <span class="kw3">pinMode</span><span class="br0">(</span>DIR_PIN<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span> 
  <span class="kw3">pinMode</span><span class="br0">(</span>STEP_PIN<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span> 
<span class="br0">}</span> 

<span class="kw4">void</span> loop<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span> 

  <span class="co1">//rotate a specific number of degrees </span>
  rotateDeg<span class="br0">(</span>360<span class="sy0">,</span> 1<span class="br0">)</span><span class="sy0">;</span> 
  <span class="kw3">delay</span><span class="br0">(</span>1000<span class="br0">)</span><span class="sy0">;</span>

  rotateDeg<span class="br0">(</span><span class="sy0">-</span>360<span class="sy0">,</span> .1<span class="br0">)</span><span class="sy0">;</span>  <span class="co1">//reverse</span>
  <span class="kw3">delay</span><span class="br0">(</span>1000<span class="br0">)</span><span class="sy0">;</span> 


  <span class="co1">//rotate a specific number of microsteps (8 microsteps per step)</span>
  <span class="co1">//a 200 step stepper would take 1600 micro steps for one full revolution</span>
  rotate<span class="br0">(</span>1600<span class="sy0">,</span> .5<span class="br0">)</span><span class="sy0">;</span> 
  <span class="kw3">delay</span><span class="br0">(</span>1000<span class="br0">)</span><span class="sy0">;</span> 

  rotate<span class="br0">(</span><span class="sy0">-</span>1600<span class="sy0">,</span> .25<span class="br0">)</span><span class="sy0">;</span> <span class="co1">//reverse</span>
  <span class="kw3">delay</span><span class="br0">(</span>1000<span class="br0">)</span><span class="sy0">;</span> 
<span class="br0">}</span>



<span class="kw4">void</span> rotate<span class="br0">(</span><span class="kw4">int</span> steps<span class="sy0">,</span> <span class="kw4">float</span> speed<span class="br0">)</span><span class="br0">{</span> 
  <span class="co1">//rotate a specific number of microsteps (8 microsteps per step) - (negitive for reverse movement)</span>
  <span class="co1">//speed is any number from .01 -&gt; 1 with 1 being fastest - Slower is stronger</span>
  <span class="kw4">int</span> dir <span class="sy0">=</span> <span class="br0">(</span>steps <span class="sy0">&gt;</span> 0<span class="br0">)</span><span class="sy0">?</span> <span class="kw2">HIGH</span><span class="sy0">:</span><span class="kw2">LOW</span><span class="sy0">;</span>
  steps <span class="sy0">=</span> <span class="kw3">abs</span><span class="br0">(</span>steps<span class="br0">)</span><span class="sy0">;</span>

  <span class="kw3">digitalWrite</span><span class="br0">(</span>DIR_PIN<span class="sy0">,</span>dir<span class="br0">)</span><span class="sy0">;</span> 

  <span class="kw4">float</span> usDelay <span class="sy0">=</span> <span class="br0">(</span>1<span class="sy0">/</span>speed<span class="br0">)</span> <span class="sy0">*</span> <span class="nu0">70</span><span class="sy0">;</span>

  <span class="kw1">for</span><span class="br0">(</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> steps<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span><span class="br0">{</span> 
    <span class="kw3">digitalWrite</span><span class="br0">(</span>STEP_PIN<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span> 
    <span class="kw3">delayMicroseconds</span><span class="br0">(</span>usDelay<span class="br0">)</span><span class="sy0">;</span> 

    <span class="kw3">digitalWrite</span><span class="br0">(</span>STEP_PIN<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span> 
    <span class="kw3">delayMicroseconds</span><span class="br0">(</span>usDelay<span class="br0">)</span><span class="sy0">;</span> 
  <span class="br0">}</span> 
<span class="br0">}</span> 

<span class="kw4">void</span> rotateDeg<span class="br0">(</span><span class="kw4">float</span> deg<span class="sy0">,</span> <span class="kw4">float</span> speed<span class="br0">)</span><span class="br0">{</span> 
  <span class="co1">//rotate a specific number of degrees (negitive for reverse movement)</span>
  <span class="co1">//speed is any number from .01 -&gt; 1 with 1 being fastest - Slower is stronger</span>
  <span class="kw4">int</span> dir <span class="sy0">=</span> <span class="br0">(</span>deg <span class="sy0">&gt;</span> 0<span class="br0">)</span><span class="sy0">?</span> <span class="kw2">HIGH</span><span class="sy0">:</span><span class="kw2">LOW</span><span class="sy0">;</span>
  <span class="kw3">digitalWrite</span><span class="br0">(</span>DIR_PIN<span class="sy0">,</span>dir<span class="br0">)</span><span class="sy0">;</span> 

  <span class="kw4">int</span> steps <span class="sy0">=</span> <span class="kw3">abs</span><span class="br0">(</span>deg<span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span>1<span class="sy0">/</span>0.225<span class="br0">)</span><span class="sy0">;</span>
  <span class="kw4">float</span> usDelay <span class="sy0">=</span> <span class="br0">(</span>1<span class="sy0">/</span>speed<span class="br0">)</span> <span class="sy0">*</span> <span class="nu0">70</span><span class="sy0">;</span>

  <span class="kw1">for</span><span class="br0">(</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> steps<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span><span class="br0">{</span> 
    <span class="kw3">digitalWrite</span><span class="br0">(</span>STEP_PIN<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span> 
    <span class="kw3">delayMicroseconds</span><span class="br0">(</span>usDelay<span class="br0">)</span><span class="sy0">;</span> 

    <span class="kw3">digitalWrite</span><span class="br0">(</span>STEP_PIN<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span> 
    <span class="kw3">delayMicroseconds</span><span class="br0">(</span>usDelay<span class="br0">)</span><span class="sy0">;</span> 
  <span class="br0">}</span> 
<span class="br0">}</span></pre>
<div class="codeFoot">
				Unless otherwise stated, this code is released under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a> - Please use, change and share it.
			</div>
</div>
</div>
<h3>Video</h3>
<p><iframe frameborder="0" height="534" src="http://player.vimeo.com/video/24380169?byline=0&amp;portrait=0" width="949"></iframe></p>
</div>
<div id="attribution">
<p>Article taken from <a href="http://bildr.org/easydriver">bildr.org</a> with minor changes - <i>I am the original author of this content</i></p>
<div id="attributionIcons">
<div class="ccIcon cc"></div>
<div class="ccIcon sa"></div>
<div class="ccIcon attribution"></div>
<div id="attributionText">
<a href="https://creativecommons.org/licenses/by-sa/3.0/">Content available under:<br/>Attribution-Share Alike 3.0 Unported</a>
</div>
</div>
</div>
</div></div></div></body></html>