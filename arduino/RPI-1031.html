<!DOCTYPE html >

<html lang="en">
<head>
<meta charset="utf-8"/>
<link href="style/main.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.0/mootools-yui-compressed.js" type="text/javascript"></script>
<script type="text/javascript">
	
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-4050921-11', 'auto');
	ga('send', 'pageview');
	
	function nospam(user,domain) { window.location = "mailto:" + user + "@" + domain; }
		
		
	window.addEvent('domready', function(){

		$$('.codeHead .copy').addEvent('click', function(event) {
			this.highlight();
			event.stop();
			
			var code = this.getParent('.codesnip-container').getElement('.codesnip');
			
			if (code.select) {
				code.select();
			}else if (document.selection) {
				var range = document.body.createTextRange();
				range.moveToElementText(code);
				range.select();
			} else if (window.getSelection) {
				var range = document.createRange();
				range.selectNode(code);
				window.getSelection().addRange(range);
			}
			
			
			try {
				var successful = document.execCommand('copy');
				var msg = successful ? 'successful' : 'unsuccessful';
				console.log('Copying text command was ' + msg);
			} catch (err) {
				console.log('Oops, unable to copy');
			}
		});
	
	});
	</script>
<!--
	
	Icon Set:	IcoMoon - Free -- http://keyamoon.com/icomoon/
	License:	CC BY-SA 3.0 -- http://creativecommons.org/licenses/by-sa/3.0/
	
	
	Icon Set:	Broccolidry -- http://dribbble.com/shots/587469-Free-16px-Broccolidryiconsaniconsetitisfullof-icons
	License:	Aribitrary -- http://licence.visualidiot.com/
	
	-->
<title>Adam meyer | Arduino</title>
</head>
<body>
<div id="headerWrapper">
<div id="header">
<h1><a href="http://adam-meyer.com">Adam meyer</a></h1>
<h2>Design + Code</h2>
<div id="topNav">
<a href="../about.html" id="aboutLink">About</a>
<a href="../resume.pdf">Resume</a>
<a href="../index.html">Portfolio</a>
<a href="index.html">Arduino Articles</a>
<span id="contactLink"><span onclick="javascript:nospam('sternmeyer','gmail.com');">Contact</span>
<div id="contactLinks">
<a class="icon-twitter" href="http://twitter.com/sternmeyer" title="twitter"></a>
<a class="icon-linkedin" href="http://www.linkedin.com/pub/adam-meyer/20/7a/850/" title="linked in"></a>
<a class="icon-dribbble" href="http://dribbble.com/ameyer" title="dribbble"></a>
<a class="icon-github" href="https://github.com/ameyer" title="github"></a>
<a class="icon-instagram" href="http://instagram.com/sternmeyer" title="instagram"></a>
<a class="icon-envelope2" href="mailto:sternmeyer@gmail.com" title="email"></a>
</div>
</span>
</div>
</div>
</div>
<div id="articleWrapper">
<div class="content">
<div class="post"><h2>Tilt Sensing with the RPI-1031 + Arduino</h2>
<div class="postContent">
<p><img class="noFrame" src="images/2012/01/tilt.jpg"/></p>
<div class="columnBody">
<div class="leftColumn">
<p>Once in a while something comes out that I think is going to be really awesome, but when you get it, it is just so so. Im sure you all know what I mean... But yeah... This is one of those.</p>
<p>The RPI-1031 <a href="http://www.sparkfun.com/products/10621">available</a> from <a href="http://www.sparkfun.com/">sparkfun</a> is a pretty simple (heck, it is dead simple) sensor for sensing when it is tilted. And it does this really well. But it seriously only does that. If it is not tilted, it freaks out and reports tilt anyways.</p>
<p>It actually just uses a metal ball that rolls around inside (you can hear it moving around when you tip it). Because of how it is made, the ball is always up against one side even when it is flat. Unfortunately this means you can never know the difference between a reading, and it being flat, only changes in reading.</p>
<h3>Hooking it up</h3>
<p>This is as simple as it gets I guess. Just power and ground, then connect the 2 digital pins and you are done. These 2 digital pins will output LOW/LOW, LOW/HIGH, HIGH/LOW and HIGH/HIGH depending on the wall it is touching. Again, even if it is flat, it is still touching a wall.</p>
<h3>Code</h3>
<p>The code for this guy is really simple, it just checks 2 pins, to see what side is being touched - The simple function just takes the 2 digital outputs and returns 0,1,2 or 3 depending on the side. </p>
</div>
<div class="rightColumn">
<a href="images/2012/01/RPI-1031_arduino_hookup.png"><img alt="" class="alignleft size-medium wp-image-1910" height="597" src="images/2012/01/RPI-1031_arduino_hookup-400x597.png" title="RPI-1031_arduino_hookup" width="400"/></a>
</div>
</div>
<div class="codesnip-container">
<div class="codeHead">
<a class="copy" href="#">Copy Code</a>
</div>
<pre class="arduino codesnip" style="font-family:monospace;"><span class="co1">//For the RPI-1031 - http://www.sparkfun.com/products/10621 </span>

<span class="kw4">int</span> tilt_s1 <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">;</span>
<span class="kw4">int</span> tilt_s2 <span class="sy0">=</span> <span class="nu0">3</span><span class="sy0">;</span>

<span class="kw4">void</span> setup<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
 <span class="kw3">pinMode</span><span class="br0">(</span>tilt_s1<span class="sy0">,</span> <span class="kw2">INPUT</span><span class="br0">)</span><span class="sy0">;</span>
 <span class="kw3">pinMode</span><span class="br0">(</span>tilt_s2<span class="sy0">,</span> <span class="kw2">INPUT</span><span class="br0">)</span><span class="sy0">;</span>
 <span class="kw3">Serial</span>.<span class="me1">begin</span><span class="br0">(</span>9600<span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>

<span class="kw4">void</span> loop<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
  <span class="kw4">int</span> position <span class="sy0">=</span> getTiltPos<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">Serial</span>.<span class="me1">println</span><span class="br0">(</span>position<span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">delay</span><span class="br0">(</span>200<span class="br0">)</span><span class="sy0">;</span> <span class="co1">//only here to slow down the serial output</span>
<span class="br0">}</span>

<span class="kw4">int</span> getTiltPosition<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
   <span class="kw4">int</span> s1 <span class="sy0">=</span> <span class="kw3">digitalRead</span><span class="br0">(</span>tilt_s1<span class="br0">)</span><span class="sy0">;</span>
   <span class="kw4">int</span> s2 <span class="sy0">=</span> <span class="kw3">digitalRead</span><span class="br0">(</span>tilt_s2<span class="br0">)</span><span class="sy0">;</span>
   <span class="kw1">return</span> <span class="br0">(</span>s1 <span class="sy0">&lt;&lt;</span> 1<span class="br0">)</span> <span class="sy0">|</span> s2<span class="sy0">;</span> <span class="co1">//bitwise math to combine the values</span>
<span class="br0">}</span></pre>
<div class="codeFoot">
				Unless otherwise stated, this code is released under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a> - Please use, change and share it.
			</div>
</div>
</div>
<div id="attribution">
<p>Article taken from <a href="http://bildr.org/rpi-1031_arduino">bildr.org</a> with minor changes - <i>I am the original author of this content</i></p>
<div id="attributionIcons">
<div class="ccIcon cc"></div>
<div class="ccIcon sa"></div>
<div class="ccIcon attribution"></div>
<div id="attributionText">
<a href="https://creativecommons.org/licenses/by-sa/3.0/">Content available under:<br/>Attribution-Share Alike 3.0 Unported</a>
</div>
</div>
</div>
</div></div></div></body></html>