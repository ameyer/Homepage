<!DOCTYPE html >

<html lang="en">
<head>
<meta charset="utf-8"/>
<link href="style/main.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.0/mootools-yui-compressed.js" type="text/javascript"></script>
<script type="text/javascript">
	
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-4050921-11', 'auto');
	ga('send', 'pageview');
	
	function nospam(user,domain) { window.location = "mailto:" + user + "@" + domain; }
		
		
	window.addEvent('domready', function(){

		$$('.codeHead .copy').addEvent('click', function(event) {
			this.highlight();
			event.stop();
			
			var code = this.getParent('.codesnip-container').getElement('.codesnip');
			
			if (code.select) {
				code.select();
			}else if (document.selection) {
				var range = document.body.createTextRange();
				range.moveToElementText(code);
				range.select();
			} else if (window.getSelection) {
				var range = document.createRange();
				range.selectNode(code);
				window.getSelection().addRange(range);
			}
			
			
			try {
				var successful = document.execCommand('copy');
				var msg = successful ? 'successful' : 'unsuccessful';
				console.log('Copying text command was ' + msg);
			} catch (err) {
				console.log('Oops, unable to copy');
			}
		});
	
	});
	</script>
<!--
	
	Icon Set:	IcoMoon - Free -- http://keyamoon.com/icomoon/
	License:	CC BY-SA 3.0 -- http://creativecommons.org/licenses/by-sa/3.0/
	
	
	Icon Set:	Broccolidry -- http://dribbble.com/shots/587469-Free-16px-Broccolidryiconsaniconsetitisfullof-icons
	License:	Aribitrary -- http://licence.visualidiot.com/
	
	-->
<title>Adam meyer | Arduino</title>
</head>
<body>
<div id="headerWrapper">
<div id="header">
<h1><a href="http://adam-meyer.com">Adam meyer</a></h1>
<h2>Design + Code</h2>
<div id="topNav">
<a href="../about.html" id="aboutLink">About</a>
<a href="../resume.pdf">Resume</a>
<a href="../index.html">Portfolio</a>
<a href="index.html">Arduino Articles</a>
<span id="contactLink"><span onclick="javascript:nospam('sternmeyer','gmail.com');">Contact</span>
<div id="contactLinks">
<a class="icon-twitter" href="http://twitter.com/sternmeyer" title="twitter"></a>
<a class="icon-linkedin" href="http://www.linkedin.com/pub/adam-meyer/20/7a/850/" title="linked in"></a>
<a class="icon-dribbble" href="http://dribbble.com/ameyer" title="dribbble"></a>
<a class="icon-github" href="https://github.com/ameyer" title="github"></a>
<a class="icon-instagram" href="http://instagram.com/sternmeyer" title="instagram"></a>
<a class="icon-envelope2" href="mailto:sternmeyer@gmail.com" title="email"></a>
</div>
</span>
</div>
</div>
</div>
<div id="articleWrapper">
<div class="content">
<div class="post"><h2>How’s the weather? TMP102 + Arduino</h2>
<div class="postContent">
<p><img class="noFrame" src="images/2011/01/tmp102.jpg"/></p>
<div class="columnBody">
<div class="leftColumn">
The TMP102 is a very simple, yet accurate, ambient temperature sensor which is capable of detecting .0625ºC changes between -25 and +85°C, with an accuracy of 0.5°C. And the real kicker... It does all of this while only consuming 10µA (10 millionths of an amp). The thing is quite tiny, so <a href="http://www.sparkfun.com/">SparkFun</a> has put it on a <a href="http://www.sparkfun.com/products/9418">breakout board</a> to make things easier.
<p>Naturally, you probably already ordered a few of these for your room-to-room sensor-network to prove to your landlord that the heat is dropping below the agreed temperature. Wait... That's just me? You just want to know how to hook one up to your Arduino? Ok... I can help with that.</p>
<p>The TMP102 is an I2C device, so when we are done with it, it will actually tell you the temperature, not send an analog signal that you then need to interpret. But that also means it is a little harder (code-wise) than just using an ADC and reading an analog voltage. But, in return for the added complexity, It is also more accurate then any analog reading the Arduino is capable of. So, if you actually care what the ambient temperature is, and not just checking to see if the temperature has changed, this is your guy.  I say ambient temperature because it would be a little hard to connect this to anything, and it doesn't support a thermocouple.</p>
</div>
<div class="rightColumn">
<a href="images/2011/01/tmp102.png"><img class="noFrame" src="images/2011/01/tmp102.png"/></a>
</div>
</div>
<p>For this, and all other I2C devices connected to your arduino, all you need to know is that I2C is a 2-wire serial connection, SDA (Data) and SCL (Clock) - On your Arduino (everything but the mega) SDA is on analog pin 4, and SCL is on analog pin 5. On an arduino mega, SDA is digital 20, and SCL is digital 21. Like most I2C devices, when communicating with one on an Arduino, we will be using the <a href="http://arduino.cc/en/Reference/Wire">Wire library</a> to do so.</p>
<p>The sensor has an address pin (ADD0) that is used to change the address the sensor is located at. This is useful if you need more than one of these hooked up to one Arduino, you can still call them independently even on the same bus. We are grounding this pin so that the sensor will use the address of 72 (0x48 in hex). Connecting this pin to V+ (3.3v on the arduino) would set the address to 73 (0x49 in hex), and you would just need to change that address at the top of the code ( int tmp102Address = 0x49; ).</p>
<p>The code for the TMP102 is the easiest I2C device I have yet run across, and accessing the value from it is just a few lines of code. To please the greatest ammount of people, we are going to output the values in both Celsius and Fahrenheit. But if you wanted to do the math, and had your reasons, you could output <a href="http://en.wikipedia.org/wiki/Réaumur_scale">Réaumur</a> or even <a href="http://en.wikipedia.org/wiki/Delisle_scale">Delisle</a>.</p>
<p>Arduino 1.0 Compatible</p>
<div class="codesnip-container">
<div class="codeHead">
<a class="copy" href="#">Copy Code</a>
</div>
<pre class="arduino codesnip" style="font-family:monospace;">
<span class="co1">//////////////////////////////////////////////////////////////////</span>
<span class="co1">//©2011 bildr</span>
<span class="co1">//Released under the MIT License - Please reuse change and share</span>
<span class="co1">//Simple code for the TMP102, simply prints temperature via serial</span>
<span class="co1">//////////////////////////////////////////////////////////////////</span>

<span class="co2">#include &lt;Wire.h&gt;</span>
<span class="kw4">int</span> tmp102Address <span class="sy0">=</span> <span class="nu12">0x48</span><span class="sy0">;</span>

<span class="kw4">void</span> setup<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
  <span class="kw3">Serial</span>.<span class="me1">begin</span><span class="br0">(</span>9600<span class="br0">)</span><span class="sy0">;</span>
  Wire.<span class="me1">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>

<span class="kw4">void</span> loop<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>

  <span class="kw4">float</span> celsius <span class="sy0">=</span> getTemperature<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">Serial</span>.<span class="me1">print</span><span class="br0">(</span><span class="st0">"Celsius: "</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">Serial</span>.<span class="me1">println</span><span class="br0">(</span>celsius<span class="br0">)</span><span class="sy0">;</span>


  <span class="kw4">float</span> fahrenheit <span class="sy0">=</span> <span class="br0">(</span>1.8 <span class="sy0">*</span> celsius<span class="br0">)</span> <span class="sy0">+</span> <span class="nu0">32</span><span class="sy0">;</span>  
  <span class="kw3">Serial</span>.<span class="me1">print</span><span class="br0">(</span><span class="st0">"Fahrenheit: "</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">Serial</span>.<span class="me1">println</span><span class="br0">(</span>fahrenheit<span class="br0">)</span><span class="sy0">;</span>

  <span class="kw3">delay</span><span class="br0">(</span>200<span class="br0">)</span><span class="sy0">;</span> <span class="co1">//just here to slow down the output. You can remove this</span>
<span class="br0">}</span>

<span class="kw4">float</span> getTemperature<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
  Wire.<span class="me1">requestFrom</span><span class="br0">(</span>tmp102Address<span class="sy0">,</span>2<span class="br0">)</span><span class="sy0">;</span> 

  <span class="kw4">byte</span> MSB <span class="sy0">=</span> Wire.<span class="me1">read</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw4">byte</span> LSB <span class="sy0">=</span> Wire.<span class="me1">read</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>

  <span class="co1">//it's a 12bit int, using two's compliment for negative</span>
  <span class="kw4">int</span> TemperatureSum <span class="sy0">=</span> <span class="br0">(</span><span class="br0">(</span>MSB <span class="sy0">&lt;&lt;</span> 8<span class="br0">)</span> <span class="sy0">|</span> LSB<span class="br0">)</span> <span class="sy0">&gt;&gt;</span> <span class="nu0">4</span><span class="sy0">;</span> 

  <span class="kw4">float</span> celsius <span class="sy0">=</span> TemperatureSum<span class="sy0">*</span><span class="nu16">0.0625</span><span class="sy0">;</span>
  <span class="kw1">return</span> celsius<span class="sy0">;</span>
<span class="br0">}</span></pre>
<div class="codeFoot">
				Unless otherwise stated, this code is released under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a> - Please use, change and share it.
			</div>
</div>
<h3>Conclusion</h3>
<p>So, there you have it: Connecting the TMP102 digital thermometer to your Arduino. I hope this was helpful, and make sure to keep checking the site for more tutorials.</p>
</div>
<div id="attribution">
<p>Article taken from <a href="http://bildr.org/tmp102-arduino">bildr.org</a> with minor changes - <i>I am the original author of this content</i></p>
<div id="attributionIcons">
<div class="ccIcon cc"></div>
<div class="ccIcon sa"></div>
<div class="ccIcon attribution"></div>
<div id="attributionText">
<a href="https://creativecommons.org/licenses/by-sa/3.0/">Content available under:<br/>Attribution-Share Alike 3.0 Unported</a>
</div>
</div>
</div>
</div></div></div></body></html>