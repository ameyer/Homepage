<!DOCTYPE html >

<html lang="en">
<head>
<meta charset="utf-8"/>
<link href="style/main.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.0/mootools-yui-compressed.js" type="text/javascript"></script>
<script type="text/javascript">
	
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-4050921-11', 'auto');
	ga('send', 'pageview');
	
	function nospam(user,domain) { window.location = "mailto:" + user + "@" + domain; }
		
		
	window.addEvent('domready', function(){

		$$('.codeHead .copy').addEvent('click', function(event) {
			this.highlight();
			event.stop();
			
			var code = this.getParent('.codesnip-container').getElement('.codesnip');
			
			if (code.select) {
				code.select();
			}else if (document.selection) {
				var range = document.body.createTextRange();
				range.moveToElementText(code);
				range.select();
			} else if (window.getSelection) {
				var range = document.createRange();
				range.selectNode(code);
				window.getSelection().addRange(range);
			}
			
			
			try {
				var successful = document.execCommand('copy');
				var msg = successful ? 'successful' : 'unsuccessful';
				console.log('Copying text command was ' + msg);
			} catch (err) {
				console.log('Oops, unable to copy');
			}
		});
	
	});
	</script>
<!--
	
	Icon Set:	IcoMoon - Free -- http://keyamoon.com/icomoon/
	License:	CC BY-SA 3.0 -- http://creativecommons.org/licenses/by-sa/3.0/
	
	
	Icon Set:	Broccolidry -- http://dribbble.com/shots/587469-Free-16px-Broccolidryiconsaniconsetitisfullof-icons
	License:	Aribitrary -- http://licence.visualidiot.com/
	
	-->
<title>Adam meyer | Arduino</title>
</head>
<body>
<div id="headerWrapper">
<div id="header">
<h1><a href="http://adam-meyer.com">Adam meyer</a></h1>
<h2>Design + Code</h2>
<div id="topNav">
<a href="../about.html" id="aboutLink">About</a>
<a href="../resume.pdf">Resume</a>
<a href="../index.html">Portfolio</a>
<a href="index.html">Arduino Articles</a>
<span id="contactLink"><span onclick="javascript:nospam('sternmeyer','gmail.com');">Contact</span>
<div id="contactLinks">
<a class="icon-twitter" href="http://twitter.com/sternmeyer" title="twitter"></a>
<a class="icon-linkedin" href="http://www.linkedin.com/pub/adam-meyer/20/7a/850/" title="linked in"></a>
<a class="icon-dribbble" href="http://dribbble.com/ameyer" title="dribbble"></a>
<a class="icon-github" href="https://github.com/ameyer" title="github"></a>
<a class="icon-instagram" href="http://instagram.com/sternmeyer" title="instagram"></a>
<a class="icon-envelope2" href="mailto:sternmeyer@gmail.com" title="email"></a>
</div>
</span>
</div>
</div>
</div>
<div id="articleWrapper">
<div class="content">
<div class="post"><h2>Get Touchy - Nintendo DS Touch Screen + Arduino</h2>
<div class="postContent">
<p><img class="noFrame" src="images/2011/06/DS_Touch.jpg"/></p>
<div class="columnBody">
<div class="leftColumn">
<p>It seems like touch screens are plastered on every consumer electronic device from your phone to your refrigerator. And why not right? Well, even though those beautiful multitouch hi-res screens are a little pricy and crazy hard to develop with, doesn't mean we cant still add a touch panel to our project. The touch panel from the Nintendo DS provides a very simple, inexpensive solution to allow us to do just that.</p>
<p>The Nintendo DS panel is a resistive panel making it very easy to hook it up to our Arduino, but it only recognizes a single input at a time and is a little imprecise.</p>
<h3>Hooking It Up</h3>
<p>If you are going to use this, I highly recommend using the breakout board with it because it is a little hard soldering directly to the ribbon cable. <strong>If you are using the breakout board: The ribbon from the panel it too thin to be used with the breakout board, and it will just fall out (weird I know).</strong> To fix this I stuck 2 layers of scotch tape over the back and cut off the excess with an x-acto blade -  just make sure not to cut the ribbon. The brown plastic part of the breakout-board connector pulls out so you can slide the ribbon in it (pins side up). Once you have the ribbon in, and aligned nicely, make sure to slide the connector close to lock it into place.</p>
<p>Now that the panel is connected to the breakout, just note... the panel is actually now upside down (again... weird). I just flipped the panel over and to right so the ribbon was just bent at a 45ยบ angle, but you can do whatever works best for you. </p>
<p>If you are wondering where the +/GND &amp; resistors are... don't worry about it. Just connect the 4 pins into the Arduino as shown and you are ready for the code. This really is how it goes, it gets power and ground from the pins based on how the code works.</p>
</div>
<div class="rightColumn">
<p><a href="images/2011/06/DS-Touch-Arduino.png"><img alt="" class="alignleft size-medium wp-image-1341" height="693" src="images/2011/06/DS-Touch-Arduino-400x693.png" title="DS-Touch-Arduino" width="400"/></a></p>
</div>
</div>
<h3>Code</h3>
<p>This code may look a little funky at first, so just hold on. If you didn't know, the analog pins can be used as digital pins if needed and can be written to. The pins we are using need to act as digital pins at points and analog pins at others. Some people refer to the analog pins as pins 14-19 when using them as digital pins, and the Arduino will understand that. But that always confused the crud out of me when I was new to this so I will be referring to them as A0, A1, A2 &amp; A3 because it does the same thing, and is much less confusing. Also, on the Arduino Mega, there is a digital pin 14, making things even weirder, so this takes that into consideration as well.</p>
<h4>If you are still confused:</h4>
<p>If you tell your arduino to do an analogRead on pin 0, it knows to read from analog pin 0. If you tell the arduino to do a digitalWrite on pin 0 it uses digital 0. We need to do a digitalWrite on analog 0, then an analogRead on analog 0 as well. So if we just said 0 for both, the Arduino would be confused and write to the digital 0 then read from analog 0. So we are saying A0 so it knows that whether we are reading or writing to that pin, we mean analog 0.</p>
<p>This code will just output the coordinates in the serial terminal when you touch it. The top left should be 0,0 and should move to about 800,770 in the bottom right. I shouldn't output anything when it is not being touched. </p>
<p>If it does not respond when you touch the panel, try the other side, it is a little hard to tell just by looking at it, what the sensitive side is. If you tried both sides and it still does not respond, try repositioning the ribbon cable in the connector and try again.</p>
<div class="codesnip-container">
<div class="codeHead">
<a class="copy" href="#">Copy Code</a>
</div>
<pre class="arduino codesnip" style="font-family:monospace;"><span class="kw4">int</span> y1 <span class="sy0">=</span> A0<span class="sy0">;</span>
<span class="kw4">int</span> x2 <span class="sy0">=</span> A1<span class="sy0">;</span>
<span class="kw4">int</span> y2 <span class="sy0">=</span> A2<span class="sy0">;</span>
<span class="kw4">int</span> x1 <span class="sy0">=</span> A3<span class="sy0">;</span>

<span class="kw4">void</span> setup<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> 
  <span class="kw3">Serial</span>.<span class="me1">begin</span><span class="br0">(</span>9600<span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span> 

<span class="kw4">int</span> readX<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>y1<span class="sy0">,</span> <span class="kw2">INPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>x2<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>y2<span class="sy0">,</span> <span class="kw2">INPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>x1<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>

  <span class="kw3">digitalWrite</span><span class="br0">(</span>x2<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">digitalWrite</span><span class="br0">(</span>x1<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span>

  <span class="kw3">delay</span><span class="br0">(</span>5<span class="br0">)</span><span class="sy0">;</span> <span class="co1">//pause to allow lines to power up</span>

  <span class="kw1">return</span> <span class="kw3">analogRead</span><span class="br0">(</span>y1<span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>

<span class="kw4">int</span> readY<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>

  <span class="kw3">pinMode</span><span class="br0">(</span>y1<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>x2<span class="sy0">,</span> <span class="kw2">INPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>y2<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>x1<span class="sy0">,</span> <span class="kw2">INPUT</span><span class="br0">)</span><span class="sy0">;</span>

  <span class="kw3">digitalWrite</span><span class="br0">(</span>y1<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw3">digitalWrite</span><span class="br0">(</span>y2<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy0">;</span>

  <span class="kw3">delay</span><span class="br0">(</span>5<span class="br0">)</span><span class="sy0">;</span> <span class="co1">//pause to allow lines to power up</span>

  <span class="kw1">return</span> <span class="kw3">analogRead</span><span class="br0">(</span>x2<span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>

<span class="kw4">void</span> loop<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw4">int</span> x <span class="sy0">=</span> readX<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw4">int</span> y <span class="sy0">=</span> readY<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>


  <span class="kw1">if</span><span class="br0">(</span>x <span class="sy0">&lt;</span> 1000 <span class="sy0">&amp;</span> y <span class="sy0">&lt;</span> 1000<span class="br0">)</span><span class="br0">{</span>
    <span class="kw3">Serial</span>.<span class="me1">print</span><span class="br0">(</span><span class="st0">"x: "</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">Serial</span>.<span class="me1">print</span><span class="br0">(</span>x<span class="sy0">-</span>100<span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">Serial</span>.<span class="me1">print</span><span class="br0">(</span><span class="st0">" - y: "</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">Serial</span>.<span class="me1">println</span><span class="br0">(</span>y<span class="sy0">-</span> 130<span class="br0">)</span><span class="sy0">;</span>  
  <span class="br0">}</span>

  <span class="kw3">delay</span><span class="br0">(</span>100<span class="br0">)</span><span class="sy0">;</span> <span class="co1">//just to slow this down so it is earier to read in the terminal - Remove if wanted</span>

<span class="br0">}</span></pre>
<div class="codeFoot">
				Unless otherwise stated, this code is released under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a> - Please use, change and share it.
			</div>
</div>
</div>
<div id="attribution">
<p>Article taken from <a href="http://bildr.org/ds-touch-screen-arduino">bildr.org</a> with minor changes - <i>I am the original author of this content</i></p>
<div id="attributionIcons">
<div class="ccIcon cc"></div>
<div class="ccIcon sa"></div>
<div class="ccIcon attribution"></div>
<div id="attributionText">
<a href="https://creativecommons.org/licenses/by-sa/3.0/">Content available under:<br/>Attribution-Share Alike 3.0 Unported</a>
</div>
</div>
</div>
</div></div></div></body></html>